<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>mapamundi</title>
    <meta name="description" content="christian parsons">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <script src="index.js"></script>
    <link rel="stylesheet" href="index.css"> 
  </head>

  <body>
    <div id="container">

      <div id="map"></div>

      <div id="topbar">

        <div class="title">mapamundi</div>
        <div id="node-search" class="search-box">
          <input type="text" placeholder="Search for multiple countries..."/>
          <div class="search-box-clear">×</div>
        </div>
        <div id="node-selected" class="item-selected"></div>
        <div id="metric-selected" class="item-selected"></div>

      </div>

      <div id="sidebar">
        <div id="metric-search" class="search-box">
          <input type="text" placeholder="Search metrics..."/>
          <div class="search-box-clear">×</div>
        </div>
        <div id="metrics"></div>
      </div>

      <div id="bottombar">

        <svg id="reset-zoom" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"/><path clip-path="url(#b)" fill="none" d="M0 0h24v24H0z"/></svg>

        <svg id="help-button" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg>

      </div> 

      <div id="help" class="modal">

        <div id="help-description">

          <div class="title">mapamundi</div> 

          <div id="help-description-content">

            <div id="help-description-text">
              <p>We make maps of the world since the beginnings of our culture, from the babylonian <a href="//en.m.wikipedia.org/wiki/Babylonian_Map_of_the_World" target="_blank">Imago Mundi</a> to the latest big data based digital maps.</p>
              <p>Here a new world map is created from a geometric interpretation of data:</p>
              <p>A high-dimensional space is constructed from socio-economic data about countries from different sources. Each country is a point in space and each metric is a dimension (around 100 dimensions for the current map).</p> 
              <p>Using dimensionality reduction (TSNE), clustering (DBSCAN) and topological data analysis (Kepler mapper), the points in high-dimensional space are projected and embedded in two dimensions.</p>
              <p>The result is a flat map that approximates the shape of data in high-dimensional space.</p>
              <p>A new world map with different borders and regions arises. Another geography made of people, lives and ties is revealed.</p>
            </div>

            <div id="help-description-credits">
              <p>Created by <a href="//christian-parsons.com/" target="_blank">Christian Parsons</a></p>
              <p><a href="/data/metrics.csv">Download Data (csv)</a></p>
              <p>Many thanks to the people that created the open-source tools and data sources used in this project</p>
              <p>Tools:</p>
              <a href="//kepler-mapper.scikit-tda.org/" target="_blank">kepler-mapper.scikit-tda.org</a>
              <a href="//scikit-learn.org/" target="_blank">scikit-learn.org</a>
              <a href="//pandas.pydata.org/" target="_blank">pandas.pydata.org</a>
              <a href="//d3js.org/" target="_blank">d3js.org</a>
              <a href="//lodash.com/" target="_blank">lodash.com</a>
              <p>Data sources:</p>
              <a href="//bit.ly/WDVP-Dataset2" target="_blank">World Data Visualization Prize (dataset: What Makes A "Good" Government?)</a>
              <a href="//www.socialprogress.org" target="_blank">Social Progress Index</a>
              <a href="//atlas.media.mit.edu/en/rankings/country/eci/" target="_blank">Economic Complexity Index</a>
            </div>

          </div>

        </div><!--help description-->


        <div id="help-search" class="help-box">
          <div>Use comma to search for multiple countries or metrics and compare</div>
          <svg class="help-arrow top-left-to-left" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/></svg>
          <svg class="help-arrow top-right-to-right" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/></svg>
        </div>

        <div id="help-select-node" class="help-box">

          <div>

            <div class="hover-device">
              <svg class="help-icon" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><polygon points="24.6,5 24.6,76.1 40.8,60.6 59.2,94.8 70.2,88.9 52.9,55.6 75.4,55.6 "/></svg>
              <div>Click</div>
            </div>

            <div class="non-hover-device">
              <svg class="help-icon" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" clip-path="url(#b)"/></svg>
              <div>Touch</div>
            </div>

            <div>a circle on the map to select a country</div>

          </div>

          <div>(no circle means there's no metric for a country)</div>

          <svg class="help-arrow bottom-left-to-bottom" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/></svg>

        </div>

        <div id="help-metrics-panel" class="help-box">

          <div>

            <div class="hover-device">
              <svg class="help-icon" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><polygon points="24.6,5 24.6,76.1 40.8,60.6 59.2,94.8 70.2,88.9 52.9,55.6 75.4,55.6 "/></svg>
              <div>Click</div>
            </div>

            <div class="non-hover-device">
              <svg class="help-icon" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" clip-path="url(#b)"/></svg>
              <div>Touch</div>
            </div>

            <div>to select a metric</div>

          </div>

          <div>
            <svg class="help-icon icon-scroll" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z"/></svg>
            <span>Scroll to view more metrics</span> 
          </div>

          <div>
            <svg class="help-icon icon-drag" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M7.77 6.76L6.23 5.48.82 12l5.41 6.52 1.54-1.28L3.42 12l4.35-5.24zM7 13h2v-2H7v2zm10-2h-2v2h2v-2zm-6 2h2v-2h-2v2zm6.77-7.52l-1.54 1.28L20.58 12l-4.35 5.24 1.54 1.28L23.18 12l-5.41-6.52z"/></svg>
            <span>Drag to view countries by metric</span> 
          </div>

          <svg class="help-arrow bottom-right-to-right" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/></svg>

        </div>

        <div id="help-map-zoom" class="help-box">

          <div>
            <svg class="help-icon icon-navigate" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path clip-path="url(#b)" d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6z"/><path clip-path="url(#b)" fill="none" d="M0 0h24v24H0z"/></svg>
            <span>Navigate the map with</span> 
          </div> 

          <div class="hover-device">
            <svg class="help-icon" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M13 1.07V9h7c0-4.08-3.05-7.44-7-7.93zM4 15c0 4.42 3.58 8 8 8s8-3.58 8-8v-4H4v4zm7-13.93C7.05 1.56 4 4.92 4 9h7V1.07z"/></svg>
            <span>mouse to pan & wheel to zoom</span> 
          </div>

          <div class="non-hover-device">
            <svg class="help-icon" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 24"><defs><path id="a" d="M0 0h24v24H0V0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" clip-path="url(#b)"/></svg>
            <svg class="help-icon icon-pinch-finger" xmlns="//www.w3.org/2000/svg" xmlns:xlink="//www.w3.org/1999/xlink" width="24" height="24" viewBox="0 0 24 3"><defs><path id="a" d="M0 0h24v24H0V0z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z" clip-path="url(#b)"/></svg>
            <span>touch to pan & pinch to zoom</span>
          </div> 

        </div>

        <div id="help-map-zoom-reset" class="help-box">
          <div>Reset map view</div>
          <svg class="help-arrow" xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.01 11H4v2h12.01v3L20 12l-3.99-4z"/></svg>
        </div>

      </div><!--help-->

      <div id="screen-rotation" class="modal">
        <svg xmlns="//www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M16.48 2.52c3.27 1.55 5.61 4.72 5.97 8.48h1.5C23.44 4.84 18.29 0 12 0l-.66.03 3.81 3.81 1.33-1.32zm-6.25-.77c-.59-.59-1.54-.59-2.12 0L1.75 8.11c-.59.59-.59 1.54 0 2.12l12.02 12.02c.59.59 1.54.59 2.12 0l6.36-6.36c.59-.59.59-1.54 0-2.12L10.23 1.75zm4.6 19.44L2.81 9.17l6.36-6.36 12.02 12.02-6.36 6.36zm-7.31.29C4.25 19.94 1.91 16.76 1.55 13H.05C.56 19.16 5.71 24 12 24l.66-.03-3.81-3.81-1.33 1.32z"/></svg>
        <span>Please rotate your device for better usability.</span>
      </div>

      <div id="screen-size">
        <span>Your screen is too small. Plase visit this map on a larger device for better usability.</span>
      </div>

    </div><!--container-->

  </body>

</html>
