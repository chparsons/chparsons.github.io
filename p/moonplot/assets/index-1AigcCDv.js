(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ze(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var li={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(o,u,f){this.fn=o,this.context=u,this.once=f||!1}function a(o,u,f,d,h){if(typeof f!="function")throw new TypeError("The listener must be a function");var g=new i(f,d||o,h),y=n?n+u:u;return o._events[y]?o._events[y].fn?o._events[y]=[o._events[y],g]:o._events[y].push(g):(o._events[y]=g,o._eventsCount++),o}function s(o,u){--o._eventsCount===0?o._events=new r:delete o._events[u]}function l(){this._events=new r,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)e.call(f,d)&&u.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=n?n+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,g=d.length,y=new Array(g);h<g;h++)y[h]=d[h].fn;return y},l.prototype.listenerCount=function(u){var f=n?n+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,h,g,y){var v=n?n+u:u;if(!this._events[v])return!1;var p=this._events[v],x=arguments.length,w,S;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),x){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,f),!0;case 3:return p.fn.call(p.context,f,d),!0;case 4:return p.fn.call(p.context,f,d,h),!0;case 5:return p.fn.call(p.context,f,d,h,g),!0;case 6:return p.fn.call(p.context,f,d,h,g,y),!0}for(S=1,w=new Array(x-1);S<x;S++)w[S-1]=arguments[S];p.fn.apply(p.context,w)}else{var P=p.length,k;for(S=0;S<P;S++)switch(p[S].once&&this.removeListener(u,p[S].fn,void 0,!0),x){case 1:p[S].fn.call(p[S].context);break;case 2:p[S].fn.call(p[S].context,f);break;case 3:p[S].fn.call(p[S].context,f,d);break;case 4:p[S].fn.call(p[S].context,f,d,h);break;default:if(!w)for(k=1,w=new Array(x-1);k<x;k++)w[k-1]=arguments[k];p[S].fn.apply(p[S].context,w)}}return!0},l.prototype.on=function(u,f,d){return a(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return a(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,h){var g=n?n+u:u;if(!this._events[g])return this;if(!f)return s(this,g),this;var y=this._events[g];if(y.fn)y.fn===f&&(!h||y.once)&&(!d||y.context===d)&&s(this,g);else{for(var v=0,p=[],x=y.length;v<x;v++)(y[v].fn!==f||h&&!y[v].once||d&&y[v].context!==d)&&p.push(y[v]);p.length?this._events[g]=p.length===1?p[0]:p:s(this,g)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=n?n+u:u,this._events[f]&&s(this,f)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l})(li);var Yo=li.exports;const ve=Ze(Yo);var bn="http://www.w3.org/1999/xhtml";const dr={svg:"http://www.w3.org/2000/svg",xhtml:bn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ui(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),dr.hasOwnProperty(e)?{space:dr[e],local:t}:t}function Zo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===bn&&e.documentElement.namespaceURI===bn?e.createElement(t):e.createElementNS(n,t)}}function Xo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ci(t){var e=ui(t);return(e.local?Xo:Zo)(e)}function Qo(){}function fi(t){return t==null?Qo:function(){return this.querySelector(t)}}function ts(t){typeof t!="function"&&(t=fi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,l=r[i]=new Array(s),o,u,f=0;f<s;++f)(o=a[f])&&(u=t.call(o,o.__data__,f,a))&&("__data__"in o&&(u.__data__=o.__data__),l[f]=u);return new ot(r,this._parents)}function di(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function es(){return[]}function ns(t){return t==null?es:function(){return this.querySelectorAll(t)}}function rs(t){return function(){var e=t.apply(this,arguments);return e==null?[]:di(e)}}function is(t){typeof t=="function"?t=rs(t):t=ns(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var s=e[a],l=s.length,o,u=0;u<l;++u)(o=s[u])&&(r.push(t.call(o,o.__data__,u,s)),i.push(o));return new ot(r,i)}function as(t){return function(){return this.matches(t)}}function hi(t){return function(e){return e.matches(t)}}var os=Array.prototype.find;function ss(t){return function(){return os.call(this.children,t)}}function ls(){return this.firstElementChild}function us(t){return this.select(t==null?ls:ss(typeof t=="function"?t:hi(t)))}var cs=Array.prototype.filter;function fs(){return this.children}function ds(t){return function(){return cs.call(this.children,t)}}function hs(t){return this.selectAll(t==null?fs:ds(typeof t=="function"?t:hi(t)))}function ms(t){typeof t!="function"&&(t=as(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a=e[i],s=a.length,l=r[i]=[],o,u=0;u<s;++u)(o=a[u])&&t.call(o,o.__data__,u,a)&&l.push(o);return new ot(r,this._parents)}function mi(t){return new Array(t.length)}function gs(){return new ot(this._enter||this._groups.map(mi),this._parents)}function ze(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ze.prototype={constructor:ze,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function ps(t){return function(){return t}}function vs(t,e,n,r,i,a){for(var s=0,l,o=e.length,u=a.length;s<u;++s)(l=e[s])?(l.__data__=a[s],r[s]=l):n[s]=new ze(t,a[s]);for(;s<o;++s)(l=e[s])&&(i[s]=l)}function ys(t,e,n,r,i,a,s){var l,o,u=new Map,f=e.length,d=a.length,h=new Array(f),g;for(l=0;l<f;++l)(o=e[l])&&(h[l]=g=s.call(o,o.__data__,l,e)+"",u.has(g)?i[l]=o:u.set(g,o));for(l=0;l<d;++l)g=s.call(t,a[l],l,a)+"",(o=u.get(g))?(r[l]=o,o.__data__=a[l],u.delete(g)):n[l]=new ze(t,a[l]);for(l=0;l<f;++l)(o=e[l])&&u.get(h[l])===o&&(i[l]=o)}function xs(t){return t.__data__}function _s(t,e){if(!arguments.length)return Array.from(this,xs);var n=e?ys:vs,r=this._parents,i=this._groups;typeof t!="function"&&(t=ps(t));for(var a=i.length,s=new Array(a),l=new Array(a),o=new Array(a),u=0;u<a;++u){var f=r[u],d=i[u],h=d.length,g=di(t.call(f,f&&f.__data__,u,r)),y=g.length,v=l[u]=new Array(y),p=s[u]=new Array(y),x=o[u]=new Array(h);n(f,d,v,p,x,g,e);for(var w=0,S=0,P,k;w<y;++w)if(P=v[w]){for(w>=S&&(S=w+1);!(k=p[S])&&++S<y;);P._next=k||null}}return s=new ot(s,r),s._enter=l,s._exit=o,s}function bs(){return new ot(this._exit||this._groups.map(mi),this._parents)}function ws(t,e,n){var r=this.enter(),i=this,a=this.exit();return r=typeof t=="function"?t(r):r.append(t+""),e!=null&&(i=e(i)),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function As(t){if(!(t instanceof ot))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),s=new Array(r),l=0;l<a;++l)for(var o=e[l],u=n[l],f=o.length,d=s[l]=new Array(f),h,g=0;g<f;++g)(h=o[g]||u[g])&&(d[g]=h);for(;l<r;++l)s[l]=e[l];return new ot(s,this._parents)}function Ss(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function Ms(t){t||(t=Cs);function e(d,h){return d&&h?t(d.__data__,h.__data__):!d-!h}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var s=n[a],l=s.length,o=i[a]=new Array(l),u,f=0;f<l;++f)(u=s[f])&&(o[f]=u);o.sort(e)}return new ot(i,this._parents).order()}function Cs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Ts(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function $s(){return Array.from(this)}function Ns(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function ks(){let t=0;for(const e of this)++t;return t}function Es(){return!this.node()}function Ps(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,s=i.length,l;a<s;++a)(l=i[a])&&t.call(l,l.__data__,a,i);return this}function Is(t){return function(){this.removeAttribute(t)}}function Ls(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Os(t,e){return function(){this.setAttribute(t,e)}}function Fs(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Bs(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Ds(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Rs(t,e){var n=ui(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Ls:Is:typeof e=="function"?n.local?Ds:Bs:n.local?Fs:Os)(n,e))}function gi(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Hs(t){return function(){this.style.removeProperty(t)}}function zs(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Vs(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Gs(t,e,n){return arguments.length>1?this.each((e==null?Hs:typeof e=="function"?Vs:zs)(t,e,n??"")):Us(this.node(),t)}function Us(t,e){return t.style.getPropertyValue(e)||gi(t).getComputedStyle(t,null).getPropertyValue(e)}function qs(t){return function(){delete this[t]}}function js(t,e){return function(){this[t]=e}}function Ks(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Ws(t,e){return arguments.length>1?this.each((e==null?qs:typeof e=="function"?Ks:js)(t,e)):this.node()[t]}function pi(t){return t.trim().split(/^|\s+/)}function Pn(t){return t.classList||new vi(t)}function vi(t){this._node=t,this._names=pi(t.getAttribute("class")||"")}vi.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function yi(t,e){for(var n=Pn(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function xi(t,e){for(var n=Pn(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Js(t){return function(){yi(this,t)}}function Ys(t){return function(){xi(this,t)}}function Zs(t,e){return function(){(e.apply(this,arguments)?yi:xi)(this,t)}}function Xs(t,e){var n=pi(t+"");if(arguments.length<2){for(var r=Pn(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Zs:e?Js:Ys)(n,e))}function Qs(){this.textContent=""}function tl(t){return function(){this.textContent=t}}function el(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function nl(t){return arguments.length?this.each(t==null?Qs:(typeof t=="function"?el:tl)(t)):this.node().textContent}function rl(){this.innerHTML=""}function il(t){return function(){this.innerHTML=t}}function al(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ol(t){return arguments.length?this.each(t==null?rl:(typeof t=="function"?al:il)(t)):this.node().innerHTML}function sl(){this.nextSibling&&this.parentNode.appendChild(this)}function ll(){return this.each(sl)}function ul(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function cl(){return this.each(ul)}function fl(t){var e=typeof t=="function"?t:ci(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function dl(){return null}function hl(t,e){var n=typeof t=="function"?t:ci(t),r=e==null?dl:typeof e=="function"?e:fi(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ml(){var t=this.parentNode;t&&t.removeChild(this)}function gl(){return this.each(ml)}function pl(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vl(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function yl(t){return this.select(t?vl:pl)}function xl(t){return arguments.length?this.property("__data__",t):this.node().__data__}function _l(t){return function(e){t.call(this,e,this.__data__)}}function bl(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function wl(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,a;n<i;++n)a=e[n],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++r]=a;++r?e.length=r:delete this.__on}}}function Al(t,e,n){return function(){var r=this.__on,i,a=_l(e);if(r){for(var s=0,l=r.length;s<l;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=e;return}}this.addEventListener(t.type,a,n),i={type:t.type,name:t.name,value:e,listener:a,options:n},r?r.push(i):this.__on=[i]}}function Sl(t,e,n){var r=bl(t+""),i,a=r.length,s;if(arguments.length<2){var l=this.node().__on;if(l){for(var o=0,u=l.length,f;o<u;++o)for(i=0,f=l[o];i<a;++i)if((s=r[i]).type===f.type&&s.name===f.name)return f.value}return}for(l=e?Al:wl,i=0;i<a;++i)this.each(l(r[i],e,n));return this}function _i(t,e,n){var r=gi(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Ml(t,e){return function(){return _i(this,t,e)}}function Cl(t,e){return function(){return _i(this,t,e.apply(this,arguments))}}function Tl(t,e){return this.each((typeof e=="function"?Cl:Ml)(t,e))}function*$l(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var Nl=[null];function ot(t,e){this._groups=t,this._parents=e}function kl(){return this}ot.prototype={constructor:ot,select:ts,selectAll:is,selectChild:us,selectChildren:hs,filter:ms,data:_s,enter:gs,exit:bs,join:ws,merge:As,selection:kl,order:Ss,sort:Ms,call:Ts,nodes:$s,node:Ns,size:ks,empty:Es,each:Ps,attr:Rs,style:Gs,property:Ws,classed:Xs,text:nl,html:ol,raise:ll,lower:cl,append:fl,insert:hl,remove:gl,clone:yl,datum:xl,on:Sl,dispatch:Tl,[Symbol.iterator]:$l};function xt(t){return typeof t=="string"?new ot([[document.querySelector(t)]],[document.documentElement]):new ot([[t]],Nl)}function bi(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function wi(t){let e=t,n=t;t.length===1&&(e=(s,l)=>t(s)-l,n=El(t));function r(s,l,o,u){for(o==null&&(o=0),u==null&&(u=s.length);o<u;){const f=o+u>>>1;n(s[f],l)<0?o=f+1:u=f}return o}function i(s,l,o,u){for(o==null&&(o=0),u==null&&(u=s.length);o<u;){const f=o+u>>>1;n(s[f],l)>0?u=f:o=f+1}return o}function a(s,l,o,u){o==null&&(o=0),u==null&&(u=s.length);const f=r(s,l,o,u-1);return f>o&&e(s[f-1],l)>-e(s[f],l)?f-1:f}return{left:r,center:a,right:i}}function El(t){return(e,n)=>bi(t(e),n)}function Pl(t){return t===null?NaN:+t}const Il=wi(bi),Ll=Il.right;wi(Pl).center;function Ol(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class hr extends Map{constructor(e,n=Dl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(mr(this,e))}has(e){return super.has(mr(this,e))}set(e,n){return super.set(Fl(this,e),n)}delete(e){return super.delete(Bl(this,e))}}function mr({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fl({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Bl({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(n),t.delete(r)),n}function Dl(t){return t!==null&&typeof t=="object"?t.valueOf():t}var wn=Math.sqrt(50),An=Math.sqrt(10),Sn=Math.sqrt(2);function Rl(t,e,n){var r,i=-1,a,s,l;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),(l=Ai(t,e,n))===0||!isFinite(l))return[];if(l>0){let o=Math.round(t/l),u=Math.round(e/l);for(o*l<t&&++o,u*l>e&&--u,s=new Array(a=u-o+1);++i<a;)s[i]=(o+i)*l}else{l=-l;let o=Math.round(t*l),u=Math.round(e*l);for(o/l<t&&++o,u/l>e&&--u,s=new Array(a=u-o+1);++i<a;)s[i]=(o+i)/l}return r&&s.reverse(),s}function Ai(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=wn?10:a>=An?5:a>=Sn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=wn?10:a>=An?5:a>=Sn?2:1)}function Hl(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=wn?i*=10:a>=An?i*=5:a>=Sn&&(i*=2),e<t?-i:i}function zl(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function Si(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}const gr=Symbol("implicit");function Mi(){var t=new hr,e=[],n=[],r=gr;function i(a){let s=t.get(a);if(s===void 0){if(r!==gr)return r;t.set(a,s=e.push(a)-1)}return n[s%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new hr;for(const s of a)t.has(s)||t.set(s,e.push(s)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return Mi(e,n).unknown(r)},Si.apply(i,arguments),i}function In(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ci(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ye(){}var fe=.7,Ve=1/fe,Yt="\\s*([+-]?\\d+)\\s*",de="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ht="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vl=/^#([0-9a-f]{3,8})$/,Gl=new RegExp(`^rgb\\(${Yt},${Yt},${Yt}\\)$`),Ul=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),ql=new RegExp(`^rgba\\(${Yt},${Yt},${Yt},${de}\\)$`),jl=new RegExp(`^rgba\\(${ht},${ht},${ht},${de}\\)$`),Kl=new RegExp(`^hsl\\(${de},${ht},${ht}\\)$`),Wl=new RegExp(`^hsla\\(${de},${ht},${ht},${de}\\)$`),pr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};In(ye,he,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:vr,formatHex:vr,formatHex8:Jl,formatHsl:Yl,formatRgb:yr,toString:yr});function vr(){return this.rgb().formatHex()}function Jl(){return this.rgb().formatHex8()}function Yl(){return Ti(this).formatHsl()}function yr(){return this.rgb().formatRgb()}function he(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Vl.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?xr(e):n===3?new at(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Ee(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Ee(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gl.exec(t))?new at(e[1],e[2],e[3],1):(e=Ul.exec(t))?new at(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ql.exec(t))?Ee(e[1],e[2],e[3],e[4]):(e=jl.exec(t))?Ee(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Kl.exec(t))?wr(e[1],e[2]/100,e[3]/100,1):(e=Wl.exec(t))?wr(e[1],e[2]/100,e[3]/100,e[4]):pr.hasOwnProperty(t)?xr(pr[t]):t==="transparent"?new at(NaN,NaN,NaN,0):null}function xr(t){return new at(t>>16&255,t>>8&255,t&255,1)}function Ee(t,e,n,r){return r<=0&&(t=e=n=NaN),new at(t,e,n,r)}function Zl(t){return t instanceof ye||(t=he(t)),t?(t=t.rgb(),new at(t.r,t.g,t.b,t.opacity)):new at}function Mn(t,e,n,r){return arguments.length===1?Zl(t):new at(t,e,n,r??1)}function at(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}In(at,Mn,Ci(ye,{brighter(t){return t=t==null?Ve:Math.pow(Ve,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new at(Lt(this.r),Lt(this.g),Lt(this.b),Ge(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_r,formatHex:_r,formatHex8:Xl,formatRgb:br,toString:br}));function _r(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}`}function Xl(){return`#${Pt(this.r)}${Pt(this.g)}${Pt(this.b)}${Pt((isNaN(this.opacity)?1:this.opacity)*255)}`}function br(){const t=Ge(this.opacity);return`${t===1?"rgb(":"rgba("}${Lt(this.r)}, ${Lt(this.g)}, ${Lt(this.b)}${t===1?")":`, ${t})`}`}function Ge(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Lt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Pt(t){return t=Lt(t),(t<16?"0":"")+t.toString(16)}function wr(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ft(t,e,n,r)}function Ti(t){if(t instanceof ft)return new ft(t.h,t.s,t.l,t.opacity);if(t instanceof ye||(t=he(t)),!t)return new ft;if(t instanceof ft)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),s=NaN,l=a-i,o=(a+i)/2;return l?(e===a?s=(n-r)/l+(n<r)*6:n===a?s=(r-e)/l+2:s=(e-n)/l+4,l/=o<.5?a+i:2-a-i,s*=60):l=o>0&&o<1?0:s,new ft(s,l,o,t.opacity)}function $i(t,e,n,r){return arguments.length===1?Ti(t):new ft(t,e,n,r??1)}function ft(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}In(ft,$i,Ci(ye,{brighter(t){return t=t==null?Ve:Math.pow(Ve,t),new ft(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?fe:Math.pow(fe,t),new ft(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new at(gn(t>=240?t-240:t+120,i,r),gn(t,i,r),gn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ft(Ar(this.h),Pe(this.s),Pe(this.l),Ge(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ge(this.opacity);return`${t===1?"hsl(":"hsla("}${Ar(this.h)}, ${Pe(this.s)*100}%, ${Pe(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ar(t){return t=(t||0)%360,t<0?t+360:t}function Pe(t){return Math.max(0,Math.min(1,t||0))}function gn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Ln=t=>()=>t;function Ql(t,e){return function(n){return t+n*e}}function tu(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function eu(t){return(t=+t)==1?Ni:function(e,n){return n-e?tu(e,n,t):Ln(isNaN(e)?n:e)}}function Ni(t,e){var n=e-t;return n?Ql(t,n):Ln(isNaN(t)?e:t)}const Sr=function t(e){var n=eu(e);function r(i,a){var s=n((i=Mn(i)).r,(a=Mn(a)).r),l=n(i.g,a.g),o=n(i.b,a.b),u=Ni(i.opacity,a.opacity);return function(f){return i.r=s(f),i.g=l(f),i.b=o(f),i.opacity=u(f),i+""}}return r.gamma=t,r}(1);function nu(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function ru(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function iu(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),s;for(s=0;s<r;++s)i[s]=On(t[s],e[s]);for(;s<n;++s)a[s]=e[s];return function(l){for(s=0;s<r;++s)a[s]=i[s](l);return a}}function au(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Ue(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function ou(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=On(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Cn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pn=new RegExp(Cn.source,"g");function su(t){return function(){return t}}function lu(t){return function(e){return t(e)+""}}function uu(t,e){var n=Cn.lastIndex=pn.lastIndex=0,r,i,a,s=-1,l=[],o=[];for(t=t+"",e=e+"";(r=Cn.exec(t))&&(i=pn.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),l[s]?l[s]+=a:l[++s]=a),(r=r[0])===(i=i[0])?l[s]?l[s]+=i:l[++s]=i:(l[++s]=null,o.push({i:s,x:Ue(r,i)})),n=pn.lastIndex;return n<e.length&&(a=e.slice(n),l[s]?l[s]+=a:l[++s]=a),l.length<2?o[0]?lu(o[0].x):su(e):(e=o.length,function(u){for(var f=0,d;f<e;++f)l[(d=o[f]).i]=d.x(u);return l.join("")})}function On(t,e){var n=typeof e,r;return e==null||n==="boolean"?Ln(e):(n==="number"?Ue:n==="string"?(r=he(e))?(e=r,Sr):uu:e instanceof he?Sr:e instanceof Date?au:ru(e)?nu:Array.isArray(e)?iu:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?ou:Ue)(t,e)}function cu(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function fu(t){return function(){return t}}function du(t){return+t}var Mr=[0,1];function Kt(t){return t}function Tn(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:fu(isNaN(e)?NaN:.5)}function hu(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function mu(t,e,n){var r=t[0],i=t[1],a=e[0],s=e[1];return i<r?(r=Tn(i,r),a=n(s,a)):(r=Tn(r,i),a=n(a,s)),function(l){return a(r(l))}}function gu(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<r;)i[s]=Tn(t[s],t[s+1]),a[s]=n(e[s],e[s+1]);return function(l){var o=Ll(t,l,1,r)-1;return a[o](i[o](l))}}function pu(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vu(){var t=Mr,e=Mr,n=On,r,i,a,s=Kt,l,o,u;function f(){var h=Math.min(t.length,e.length);return s!==Kt&&(s=hu(t[0],t[h-1])),l=h>2?gu:mu,o=u=null,d}function d(h){return h==null||isNaN(h=+h)?a:(o||(o=l(t.map(r),e,n)))(r(s(h)))}return d.invert=function(h){return s(i((u||(u=l(e,t.map(r),Ue)))(h)))},d.domain=function(h){return arguments.length?(t=Array.from(h,du),f()):t.slice()},d.range=function(h){return arguments.length?(e=Array.from(h),f()):e.slice()},d.rangeRound=function(h){return e=Array.from(h),n=cu,f()},d.clamp=function(h){return arguments.length?(s=h?!0:Kt,f()):s!==Kt},d.interpolate=function(h){return arguments.length?(n=h,f()):n},d.unknown=function(h){return arguments.length?(a=h,d):a},function(h,g){return r=h,i=g,f()}}function yu(){return vu()(Kt,Kt)}function xu(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function qe(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Xt(t){return t=qe(Math.abs(t)),t?t[1]:NaN}function _u(t,e){return function(n,r){for(var i=n.length,a=[],s=0,l=t[0],o=0;i>0&&l>0&&(o+l+1>r&&(l=Math.max(1,r-o)),a.push(n.substring(i-=l,i+l)),!((o+=l+1)>r));)l=t[s=(s+1)%t.length];return a.reverse().join(e)}}function bu(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var wu=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function je(t){if(!(e=wu.exec(t)))throw new Error("invalid format: "+t);var e;return new Fn({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}je.prototype=Fn.prototype;function Fn(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Fn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Au(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ki;function Su(t,e){var n=qe(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(ki=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+qe(t,Math.max(0,e+a-1))[0]}function Cr(t,e){var n=qe(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Tr={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xu,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Cr(t*100,e),r:Cr,s:Su,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $r(t){return t}var Nr=Array.prototype.map,kr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Mu(t){var e=t.grouping===void 0||t.thousands===void 0?$r:_u(Nr.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?$r:bu(Nr.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"−":t.minus+"",o=t.nan===void 0?"NaN":t.nan+"";function u(d){d=je(d);var h=d.fill,g=d.align,y=d.sign,v=d.symbol,p=d.zero,x=d.width,w=d.comma,S=d.precision,P=d.trim,k=d.type;k==="n"?(w=!0,k="g"):Tr[k]||(S===void 0&&(S=12),P=!0,k="g"),(p||h==="0"&&g==="=")&&(p=!0,h="0",g="=");var I=v==="$"?n:v==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",M=v==="$"?r:/[%p]/.test(k)?s:"",B=Tr[k],R=/[defgprs%]/.test(k);S=S===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function A(C){var V=I,D=M,q,$,O;if(k==="c")D=B(C)+D,C="";else{C=+C;var T=C<0||1/C<0;if(C=isNaN(C)?o:B(Math.abs(C),S),P&&(C=Au(C)),T&&+C==0&&y!=="+"&&(T=!1),V=(T?y==="("?y:l:y==="-"||y==="("?"":y)+V,D=(k==="s"?kr[8+ki/3]:"")+D+(T&&y==="("?")":""),R){for(q=-1,$=C.length;++q<$;)if(O=C.charCodeAt(q),48>O||O>57){D=(O===46?i+C.slice(q+1):C.slice(q))+D,C=C.slice(0,q);break}}}w&&!p&&(C=e(C,1/0));var N=V.length+C.length+D.length,b=N<x?new Array(x-N+1).join(h):"";switch(w&&p&&(C=e(b+C,b.length?x-D.length:1/0),b=""),g){case"<":C=V+C+D+b;break;case"=":C=V+b+C+D;break;case"^":C=b.slice(0,N=b.length>>1)+V+C+D+b.slice(N);break;default:C=b+V+C+D;break}return a(C)}return A.toString=function(){return d+""},A}function f(d,h){var g=u((d=je(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(Xt(h)/3)))*3,v=Math.pow(10,-y),p=kr[8+y/3];return function(x){return g(v*x)+p}}return{format:u,formatPrefix:f}}var Ie,Ei,Pi;Cu({thousands:",",grouping:[3],currency:["$",""]});function Cu(t){return Ie=Mu(t),Ei=Ie.format,Pi=Ie.formatPrefix,Ie}function Tu(t){return Math.max(0,-Xt(Math.abs(t)))}function $u(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xt(e)/3)))*3-Xt(Math.abs(t)))}function Nu(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xt(e)-Xt(t))+1}function ku(t,e,n,r){var i=Hl(t,e,n),a;switch(r=je(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=$u(i,s))&&(r.precision=a),Pi(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Nu(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Tu(i))&&(r.precision=a-(r.type==="%")*2);break}}return Ei(r)}function Eu(t){var e=t.domain;return t.ticks=function(n){var r=e();return Rl(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return ku(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,s=r[i],l=r[a],o,u,f=10;for(l<s&&(u=s,s=l,l=u,u=i,i=a,a=u);f-- >0;){if(u=Ai(s,l,n),u===o)return r[i]=s,r[a]=l,e(r);if(u>0)s=Math.floor(s/u)*u,l=Math.ceil(l/u)*u;else if(u<0)s=Math.ceil(s*u)/u,l=Math.floor(l*u)/u;else break;o=u}return t},t}function Ot(){var t=yu();return t.copy=function(){return pu(t,Ot())},Si.apply(t,arguments),Eu(t)}var Qt=0,ue=0,se=0,Ii=1e3,Ke,ce,We=0,Ft=0,Xe=0,me=typeof performance=="object"&&performance.now?performance:Date,Li=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Oi(){return Ft||(Li(Pu),Ft=me.now()+Xe)}function Pu(){Ft=0}function $n(){this._call=this._time=this._next=null}$n.prototype=Fi.prototype={constructor:$n,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Oi():+n)+(e==null?0:+e),!this._next&&ce!==this&&(ce?ce._next=this:Ke=this,ce=this),this._call=t,this._time=n,Nn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nn())}};function Fi(t,e,n){var r=new $n;return r.restart(t,e,n),r}function Iu(){Oi(),++Qt;for(var t=Ke,e;t;)(e=Ft-t._time)>=0&&t._call.call(null,e),t=t._next;--Qt}function Er(){Ft=(We=me.now())+Xe,Qt=ue=0;try{Iu()}finally{Qt=0,Ou(),Ft=0}}function Lu(){var t=me.now(),e=t-We;e>Ii&&(Xe-=e,We=t)}function Ou(){for(var t,e=Ke,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Ke=n);ce=t,Nn(r)}function Nn(t){if(!Qt){ue&&(ue=clearTimeout(ue));var e=t-Ft;e>24?(t<1/0&&(ue=setTimeout(Er,t-me.now()-Xe)),se&&(se=clearInterval(se))):(se||(We=me.now(),se=setInterval(Lu,Ii)),Qt=1,Li(Er))}}var Fu=function(e,n,r,i,a){if(n=n!==void 0?n:!0,r=r!==void 0?r:!0,i=i||Math.pow(2,-52),a=1e-64/i,!e)throw new TypeError("Matrix a is not defined");var s=e[0].length,l=e.length;if(l<s)throw new TypeError("Invalid matrix: m < n");var o,u,f,d,h,g,y,v,p,x,w,S,P;v=0,w=0;var k=[],I=[],M=[],B=n==="f"?l:s;for(o=0;o<l;o++)I[o]=new Array(B).fill(0);for(o=0;o<s;o++)M[o]=new Array(s).fill(0);var R=new Array(s).fill(0);for(o=0;o<l;o++)for(u=0;u<s;u++)I[o][u]=e[o][u];for(o=0;o<s;o++){for(k[o]=v,x=0,d=o+1,u=o;u<l;u++)x+=Math.pow(I[u][o],2);if(x<a)v=0;else for(y=I[o][o],v=y<0?Math.sqrt(x):-Math.sqrt(x),p=y*v-x,I[o][o]=y-v,u=d;u<s;u++){for(x=0,f=o;f<l;f++)x+=I[f][o]*I[f][u];for(y=x/p,f=o;f<l;f++)I[f][u]=I[f][u]+y*I[f][o]}for(R[o]=v,x=0,u=d;u<s;u++)x+=Math.pow(I[o][u],2);if(x<a)v=0;else{for(y=I[o][o+1],v=y<0?Math.sqrt(x):-Math.sqrt(x),p=y*v-x,I[o][o+1]=y-v,u=d;u<s;u++)k[u]=I[o][u]/p;for(u=d;u<l;u++){for(x=0,f=d;f<s;f++)x+=I[u][f]*I[o][f];for(f=d;f<s;f++)I[u][f]=I[u][f]+x*k[f]}}S=Math.abs(R[o])+Math.abs(k[o]),S>w&&(w=S)}if(r)for(o=s-1;o>=0;o--){if(v!==0){for(p=I[o][o+1]*v,u=d;u<s;u++)M[u][o]=I[o][u]/p;for(u=d;u<s;u++){for(x=0,f=d;f<s;f++)x+=I[o][f]*M[f][u];for(f=d;f<s;f++)M[f][u]=M[f][u]+x*M[f][o]}}for(u=d;u<s;u++)M[o][u]=0,M[u][o]=0;M[o][o]=1,v=k[o],d=o}if(n){if(n==="f")for(o=s;o<l;o++){for(u=s;u<l;u++)I[o][u]=0;I[o][o]=1}for(o=s-1;o>=0;o--){for(d=o+1,v=R[o],u=d;u<B;u++)I[o][u]=0;if(v!==0){for(p=I[o][o]*v,u=d;u<B;u++){for(x=0,f=d;f<l;f++)x+=I[f][o]*I[f][u];for(y=x/p,f=o;f<l;f++)I[f][u]=I[f][u]+y*I[f][o]}for(u=o;u<l;u++)I[u][o]=I[u][o]/v}else for(u=o;u<l;u++)I[u][o]=0;I[o][o]=I[o][o]+1}}i=i*w;var A;for(f=s-1;f>=0;f--)for(var C=0;C<50;C++){for(A=!1,d=f;d>=0;d--){if(Math.abs(k[d])<=i){A=!0;break}if(Math.abs(R[d-1])<=i)break}if(!A){for(g=0,x=1,h=d-1,o=d;o<f+1&&(y=x*k[o],k[o]=g*k[o],!(Math.abs(y)<=i));o++)if(v=R[o],R[o]=Math.sqrt(y*y+v*v),p=R[o],g=v/p,x=-y/p,n)for(u=0;u<l;u++)S=I[u][h],P=I[u][o],I[u][h]=S*g+P*x,I[u][o]=-S*x+P*g}if(P=R[f],d===f){if(P<0&&(R[f]=-P,r))for(u=0;u<s;u++)M[u][f]=-M[u][f];break}for(w=R[d],S=R[f-1],v=k[f-1],p=k[f],y=((S-P)*(S+P)+(v-p)*(v+p))/(2*p*S),v=Math.sqrt(y*y+1),y=((w-P)*(w+P)+p*(S/(y<0?y-v:y+v)-p))/w,g=1,x=1,o=d+1;o<f+1;o++){if(v=k[o],S=R[o],p=x*v,v=g*v,P=Math.sqrt(y*y+p*p),k[o-1]=P,g=y/P,x=p/P,y=w*g+v*x,v=-w*x+v*g,p=S*x,S=S*g,r)for(u=0;u<s;u++)w=M[u][o-1],P=M[u][o],M[u][o-1]=w*g+P*x,M[u][o]=-w*x+P*g;if(P=Math.sqrt(y*y+p*p),R[o-1]=P,g=y/P,x=p/P,y=g*v+x*S,w=-x*v+g*S,n)for(u=0;u<l;u++)S=I[u][o-1],P=I[u][o],I[u][o-1]=S*g+P*x,I[u][o]=-S*x+P*g}k[d]=0,k[f]=y,R[f]=w}for(o=0;o<s;o++)R[o]<i&&(R[o]=0);return{u:I,q:R,v:M}},Bu=1/0,Du="[object Symbol]",Ru=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Hu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Bi="\\ud800-\\udfff",zu="\\u0300-\\u036f\\ufe20-\\ufe23",Vu="\\u20d0-\\u20f0",Di="\\u2700-\\u27bf",Ri="a-z\\xdf-\\xf6\\xf8-\\xff",Gu="\\xac\\xb1\\xd7\\xf7",Uu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qu="\\u2000-\\u206f",ju=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hi="A-Z\\xc0-\\xd6\\xd8-\\xde",Ku="\\ufe0e\\ufe0f",zi=Gu+Uu+qu+ju,Bn="['’]",Pr="["+zi+"]",Vi="["+zu+Vu+"]",Gi="\\d+",Wu="["+Di+"]",Ui="["+Ri+"]",qi="[^"+Bi+zi+Gi+Di+Ri+Hi+"]",Ju="\\ud83c[\\udffb-\\udfff]",Yu="(?:"+Vi+"|"+Ju+")",Zu="[^"+Bi+"]",ji="(?:\\ud83c[\\udde6-\\uddff]){2}",Ki="[\\ud800-\\udbff][\\udc00-\\udfff]",jt="["+Hi+"]",Xu="\\u200d",Ir="(?:"+Ui+"|"+qi+")",Qu="(?:"+jt+"|"+qi+")",Lr="(?:"+Bn+"(?:d|ll|m|re|s|t|ve))?",Or="(?:"+Bn+"(?:D|LL|M|RE|S|T|VE))?",Wi=Yu+"?",Ji="["+Ku+"]?",tc="(?:"+Xu+"(?:"+[Zu,ji,Ki].join("|")+")"+Ji+Wi+")*",ec=Ji+Wi+tc,nc="(?:"+[Wu,ji,Ki].join("|")+")"+ec,rc=RegExp(Bn,"g"),ic=RegExp(Vi,"g"),ac=RegExp([jt+"?"+Ui+"+"+Lr+"(?="+[Pr,jt,"$"].join("|")+")",Qu+"+"+Or+"(?="+[Pr,jt+Ir,"$"].join("|")+")",jt+"?"+Ir+"+"+Lr,jt+"+"+Or,Gi,nc].join("|"),"g"),oc=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},lc=typeof ut=="object"&&ut&&ut.Object===Object&&ut,uc=typeof self=="object"&&self&&self.Object===Object&&self,cc=lc||uc||Function("return this")();function fc(t,e,n,r){for(var i=-1,a=t?t.length:0;++i<a;)n=e(n,t[i],i,t);return n}function dc(t){return t.match(Ru)||[]}function hc(t){return function(e){return t==null?void 0:t[e]}}var mc=hc(sc);function gc(t){return oc.test(t)}function pc(t){return t.match(ac)||[]}var vc=Object.prototype,yc=vc.toString,Fr=cc.Symbol,Br=Fr?Fr.prototype:void 0,Dr=Br?Br.toString:void 0;function xc(t){if(typeof t=="string")return t;if(wc(t))return Dr?Dr.call(t):"";var e=t+"";return e=="0"&&1/t==-Bu?"-0":e}function _c(t){return function(e){return fc(Mc(Ac(e).replace(rc,"")),t,"")}}function bc(t){return!!t&&typeof t=="object"}function wc(t){return typeof t=="symbol"||bc(t)&&yc.call(t)==Du}function Yi(t){return t==null?"":xc(t)}function Ac(t){return t=Yi(t),t&&t.replace(Hu,mc).replace(ic,"")}var Sc=_c(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});function Mc(t,e,n){return t=Yi(t),e=e,e===void 0?gc(t)?pc(t):dc(t):t.match(e)||[]}var Cc=Sc;const Tc=Ze(Cc);var $c="Expected a function",Zi="__lodash_hash_undefined__",Xi=1/0,Nc="[object Function]",kc="[object GeneratorFunction]",Ec="[object Symbol]",Pc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ic=/^\w*$/,Lc=/^\./,Oc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fc=/[\\^$.*+?()[\]{}|]/g,Bc=/\\(\\)?/g,Dc=/^\[object .+?Constructor\]$/,Rc=typeof ut=="object"&&ut&&ut.Object===Object&&ut,Hc=typeof self=="object"&&self&&self.Object===Object&&self,Dn=Rc||Hc||Function("return this")();function zc(t,e){return t==null?void 0:t[e]}function Vc(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Gc=Array.prototype,Uc=Function.prototype,Qi=Object.prototype,vn=Dn["__core-js_shared__"],Rr=function(){var t=/[^.]+$/.exec(vn&&vn.keys&&vn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ta=Uc.toString,Rn=Qi.hasOwnProperty,ea=Qi.toString,qc=RegExp("^"+ta.call(Rn).replace(Fc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Hr=Dn.Symbol,jc=Gc.splice,Kc=na(Dn,"Map"),ge=na(Object,"create"),zr=Hr?Hr.prototype:void 0,Vr=zr?zr.toString:void 0;function Bt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wc(){this.__data__=ge?ge(null):{}}function Jc(t){return this.has(t)&&delete this.__data__[t]}function Yc(t){var e=this.__data__;if(ge){var n=e[t];return n===Zi?void 0:n}return Rn.call(e,t)?e[t]:void 0}function Zc(t){var e=this.__data__;return ge?e[t]!==void 0:Rn.call(e,t)}function Xc(t,e){var n=this.__data__;return n[t]=ge&&e===void 0?Zi:e,this}Bt.prototype.clear=Wc;Bt.prototype.delete=Jc;Bt.prototype.get=Yc;Bt.prototype.has=Zc;Bt.prototype.set=Xc;function ee(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qc(){this.__data__=[]}function tf(t){var e=this.__data__,n=Qe(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():jc.call(e,n,1),!0}function ef(t){var e=this.__data__,n=Qe(e,t);return n<0?void 0:e[n][1]}function nf(t){return Qe(this.__data__,t)>-1}function rf(t,e){var n=this.__data__,r=Qe(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}ee.prototype.clear=Qc;ee.prototype.delete=tf;ee.prototype.get=ef;ee.prototype.has=nf;ee.prototype.set=rf;function Rt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function af(){this.__data__={hash:new Bt,map:new(Kc||ee),string:new Bt}}function of(t){return tn(this,t).delete(t)}function sf(t){return tn(this,t).get(t)}function lf(t){return tn(this,t).has(t)}function uf(t,e){return tn(this,t).set(t,e),this}Rt.prototype.clear=af;Rt.prototype.delete=of;Rt.prototype.get=sf;Rt.prototype.has=lf;Rt.prototype.set=uf;function Qe(t,e){for(var n=t.length;n--;)if(_f(t[n][0],e))return n;return-1}function cf(t,e){e=mf(e,t)?[e]:hf(e);for(var n=0,r=e.length;t!=null&&n<r;)t=t[yf(e[n++])];return n&&n==r?t:void 0}function ff(t){if(!ia(t)||pf(t))return!1;var e=bf(t)||Vc(t)?qc:Dc;return e.test(xf(t))}function df(t){if(typeof t=="string")return t;if(zn(t))return Vr?Vr.call(t):"";var e=t+"";return e=="0"&&1/t==-Xi?"-0":e}function hf(t){return ra(t)?t:vf(t)}function tn(t,e){var n=t.__data__;return gf(e)?n[typeof e=="string"?"string":"hash"]:n.map}function na(t,e){var n=zc(t,e);return ff(n)?n:void 0}function mf(t,e){if(ra(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||zn(t)?!0:Ic.test(t)||!Pc.test(t)||e!=null&&t in Object(e)}function gf(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function pf(t){return!!Rr&&Rr in t}var vf=Hn(function(t){t=Af(t);var e=[];return Lc.test(t)&&e.push(""),t.replace(Oc,function(n,r,i,a){e.push(i?a.replace(Bc,"$1"):r||n)}),e});function yf(t){if(typeof t=="string"||zn(t))return t;var e=t+"";return e=="0"&&1/t==-Xi?"-0":e}function xf(t){if(t!=null){try{return ta.call(t)}catch{}try{return t+""}catch{}}return""}function Hn(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError($c);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var s=t.apply(this,r);return n.cache=a.set(i,s),s};return n.cache=new(Hn.Cache||Rt),n}Hn.Cache=Rt;function _f(t,e){return t===e||t!==t&&e!==e}var ra=Array.isArray;function bf(t){var e=ia(t)?ea.call(t):"";return e==Nc||e==kc}function ia(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function wf(t){return!!t&&typeof t=="object"}function zn(t){return typeof t=="symbol"||wf(t)&&ea.call(t)==Ec}function Af(t){return t==null?"":df(t)}function Sf(t,e,n){var r=t==null?void 0:cf(t,e);return r===void 0?n:r}var Mf=Sf;const Gr=Ze(Mf),pe=(t,e)=>({x:e*Math.cos(t),y:e*Math.sin(t)}),Dt=(t,e)=>{e=e||{x:0,y:0};const n=Math.atan2(e.y-t.y,t.x-e.x);return n<0?n+Math.PI*2:n},Cf=t=>Math.sqrt(t.x*t.x+t.y*t.y),Tf=t=>t*180/Math.PI,aa=(t,e)=>Math.sqrt($f(t,e)),$f=(t,e)=>{let n=e.x-t.x,r=e.y-t.y;return n*n+r*r},Nf=(t,e)=>t.x*e.x+t.y*e.y,oa=(t,e)=>typeof t=="function"?t(e):t,Vn=({selection:t,value:e,datum:n})=>{if(!n)return t.attr("fill",e);const r=t.select((i,a,s)=>i.id===n.id?s[a]:null);r&&r.attr("fill",e)},kf={volume:"Mention Volume",netSentiment:"Net Sentiment",authors:"Unique Authors",forum:"Forum",twitter:"Twitter",twitterFollowers:"Total Followers",impressions:"Total Impressions",twitterRetweets:"Total Retweets",domains:"Unique Domains",reachEstimate:"Reach",customAverage:"Average",customSum:"Sum"},Ef={none:"None",queries:"Queries",queryGroups:"Query Groups",socialpanels:"Social Panels",sentiment:"Sentiment",emotions:"Emotion",threadEntryTypes:"Mention Type",authors:"Authors",accountTypes:"Account Type",gender:"Gender",profession:"Profession",interest:"Interest",tags:"Tags",categories:"Categories",imageContent:"Image Content",actions:"Actions",scenes:"Scenes",objects:"Objects",logos:"Logos",parentCategories:"Parent Categories",assignment:"Assignments",priority:"Priorities",status:"Status",checked:"Checked",time:"Time (Auto)",minutes:"Minutes",hours:"Hours",days:"Days",weeks:"Weeks",months:"Months",hourOfDay:"Hour of Day",dayOfWeek:"Day of Week",pageTypes:"Content Sources",domains:"Site List",languages:"Languages",logoVersions:"Logo Versions",cities:"Cities",countries:"Countries",continents:"Continents",regions:"Regions"},Pf=t=>kf[t],Ur=t=>Ef[t],At="dimension1",St="dimension2",kn="aggregate",If=({data:t,metadata:e,labels:n})=>{const r=$=>$[At],i=$=>$[St],a=$=>Math.abs($[kn]),s=($,O)=>Array.from(new Set($.map(O))),l=($,O,T)=>$.reduce((N,b)=>(N[b]=T.filter(F=>O(F)===b).map(F=>F.proportion).reduce((F,U)=>F+U,0),N),{}),o=($,O)=>$.filter(T=>O[T.name]>0&&(T.magnitude===void 0||T.magnitude!==0)),u=($,O)=>$.map(T=>({...T,type:O})),f=($,O)=>{d($,O),d(O,$)},d=($,O)=>{$.forEach(T=>{T.associations=[...O].map(N=>({...N,associationValue:Nf(T.normalized,N.normalized)})).sort((N,b)=>Math.abs(b.associationValue)-Math.abs(N.associationValue))})};let h=s(t,r),g=s(t,i);if(h.length<2||g.length<2){h.length<2;const $=h.length<2?At:St;return{error:`Error: not enough data for ${Gr(n,$)||Gr(e,$)||$}`}}const y=g.length>h.length;y&&(t=t.map($=>({...$,[At]:$[St],[St]:$[At]})),h=s(t,r),g=s(t,i));const v=t.map(a).reduce(($,O)=>$+O,0),p=t.map($=>({...$,proportion:a($)/v})),x=l(h,r,p),w=l(g,i,p),S=p.map($=>{const O=x[r($)]*w[i($)],T=($.proportion-O)/(O||1)*Math.sqrt(O);return{...$,standardizedResidual:T}});let P=[];h.forEach(($,O)=>{g.forEach((T,N)=>{P[O]=P[O]||[],P[O][N]=S.find(b=>r(b)==$&&i(b)==T).standardizedResidual})});let{u:k,v:I,q:M}=Fu(P);const B=M.map($=>$*$),R=B.reduce(($,O)=>$+O,0),A=B.map($=>$/R),C=k.map(($,O)=>$.map(T=>T/(Math.sqrt(x[h[O]])||1))),V=I.map(($,O)=>$.map(T=>T/(Math.sqrt(w[g[O]])||1)));let D,q;if(y){const $=M.map((N,b)=>V.map(F=>F[b]*N)),O=qr($[0].map((N,b)=>({x:N,y:$[1][b]*-1,name:g[b],id:Le(g[b])}))),T=jr(C.map((N,b)=>({x:N[0]*M[0],y:N[1]*M[0]*-1,name:h[b],id:Le(h[b])})));D=u(o(O,w),At),q=u(o(T,x),St),f(D,q)}else{const $=M.map((N,b)=>C.map(F=>F[b]*N)),O=qr($[0].map((N,b)=>({x:N,y:$[1][b]*-1,name:h[b],id:Le(h[b])}))),T=jr(V.map((N,b)=>({x:N[0]*M[0],y:N[1]*M[0]*-1,name:g[b],id:Le(g[b])})));D=u(o(O,x),At),q=u(o(T,w),St),f(D,q)}return{innerCoords:D,outerCoords:q,explainedVariance:A}},Le=t=>Tc(t).toLowerCase(),qr=t=>ua(la(Lf(sa(t)))),jr=t=>ua(la(sa(t))).map(e=>({...e,x:e.normalized.x,y:e.normalized.y})),Lf=t=>t.map(n=>{const{magnitude:r,direction:i}=Gn(n.x,n.y);return r>1?{...n,x:i.x,y:i.y}:{...n}}),sa=t=>t.map(e=>({...e,original:{x:e.x,y:e.y}})),la=t=>t.map(e=>({...e,normalized:Gn(e.x,e.y).direction})),ua=t=>t.map(e=>({...e,magnitude:Gn(e.x,e.y).magnitude})),Gn=(t,e)=>{const n=Math.sqrt(t*t+e*e),r={x:t/(n||1),y:e/(n||1)};return{magnitude:n,direction:r}},Of=({metadata:t})=>({[At]:Ur(t[At]),[St]:Ur(t[St]),[kn]:Pf(t[kn])});function Ff(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return ca(this.cover(e,n),e,n,t)}function ca(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,s={data:r},l=t._x0,o=t._y0,u=t._x1,f=t._y1,d,h,g,y,v,p,x,w;if(!a)return t._root=s,t;for(;a.length;)if((v=e>=(d=(l+u)/2))?l=d:u=d,(p=n>=(h=(o+f)/2))?o=h:f=h,i=a,!(a=a[x=p<<1|v]))return i[x]=s,t;if(g=+t._x.call(null,a.data),y=+t._y.call(null,a.data),e===g&&n===y)return s.next=a,i?i[x]=s:t._root=s,t;do i=i?i[x]=new Array(4):t._root=new Array(4),(v=e>=(d=(l+u)/2))?l=d:u=d,(p=n>=(h=(o+f)/2))?o=h:f=h;while((x=p<<1|v)===(w=(y>=h)<<1|g>=d));return i[w]=a,i[x]=s,t}function Bf(t){var e,n,r=t.length,i,a,s=new Array(r),l=new Array(r),o=1/0,u=1/0,f=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(s[n]=i,l[n]=a,i<o&&(o=i),i>f&&(f=i),a<u&&(u=a),a>d&&(d=a));for(f<o&&(o=this._x0,f=this._x1),d<u&&(u=this._y0,d=this._y1),this.cover(o,u).cover(f,d),n=0;n<r;++n)ca(this,s[n],l[n],t[n]);return this}function Df(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else if(n>t||t>i||r>e||e>a){var s=i-n,l=this._root,o,u;switch(u=(e<(r+a)/2)<<1|t<(n+i)/2){case 0:{do o=new Array(4),o[u]=l,l=o;while(s*=2,i=n+s,a=r+s,t>i||e>a);break}case 1:{do o=new Array(4),o[u]=l,l=o;while(s*=2,n=i-s,a=r+s,n>t||e>a);break}case 2:{do o=new Array(4),o[u]=l,l=o;while(s*=2,i=n+s,r=a-s,t>i||r>e);break}case 3:{do o=new Array(4),o[u]=l,l=o;while(s*=2,n=i-s,r=a-s,n>t||r>e);break}}this._root&&this._root.length&&(this._root=l)}else return this;return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Rf(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Hf(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function rt(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function zf(t,e,n){var r,i=this._x0,a=this._y0,s,l,o,u,f=this._x1,d=this._y1,h=[],g=this._root,y,v;for(g&&h.push(new rt(g,i,a,f,d)),n==null?n=1/0:(i=t-n,a=e-n,f=t+n,d=e+n,n*=n);y=h.pop();)if(!(!(g=y.node)||(s=y.x0)>f||(l=y.y0)>d||(o=y.x1)<i||(u=y.y1)<a))if(g.length){var p=(s+o)/2,x=(l+u)/2;h.push(new rt(g[3],p,x,o,u),new rt(g[2],s,x,p,u),new rt(g[1],p,l,o,x),new rt(g[0],s,l,p,x)),(v=(e>=x)<<1|t>=p)&&(y=h[h.length-1],h[h.length-1]=h[h.length-1-v],h[h.length-1-v]=y)}else{var w=t-+this._x.call(null,g.data),S=e-+this._y.call(null,g.data),P=w*w+S*S;if(P<n){var k=Math.sqrt(n=P);i=t-k,a=e-k,f=t+k,d=e+k,r=g.data}}return r}function Vf(t){if(isNaN(f=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,s=this._x0,l=this._y0,o=this._x1,u=this._y1,f,d,h,g,y,v,p,x;if(!n)return this;if(n.length)for(;;){if((y=f>=(h=(s+o)/2))?s=h:o=h,(v=d>=(g=(l+u)/2))?l=g:u=g,e=n,!(n=n[p=v<<1|y]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,x=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[p]=a:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=a,this)}function Gf(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Uf(){return this._root}function qf(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function jf(t){var e=[],n,r=this._root,i,a,s,l,o;for(r&&e.push(new rt(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,s=n.y0,l=n.x1,o=n.y1)&&r.length){var u=(a+l)/2,f=(s+o)/2;(i=r[3])&&e.push(new rt(i,u,f,l,o)),(i=r[2])&&e.push(new rt(i,a,f,u,o)),(i=r[1])&&e.push(new rt(i,u,s,l,f)),(i=r[0])&&e.push(new rt(i,a,s,u,f))}return this}function Kf(t){var e=[],n=[],r;for(this._root&&e.push(new rt(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,s=r.x0,l=r.y0,o=r.x1,u=r.y1,f=(s+o)/2,d=(l+u)/2;(a=i[0])&&e.push(new rt(a,s,l,f,d)),(a=i[1])&&e.push(new rt(a,f,l,o,d)),(a=i[2])&&e.push(new rt(a,s,d,f,u)),(a=i[3])&&e.push(new rt(a,f,d,o,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Wf(t){return t[0]}function Jf(t){return arguments.length?(this._x=t,this):this._x}function Yf(t){return t[1]}function Zf(t){return arguments.length?(this._y=t,this):this._y}function fa(t,e,n){var r=new Un(e??Wf,n??Yf,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Un(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function Kr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var it=fa.prototype=Un.prototype;it.copy=function(){var t=new Un(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Kr(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Kr(r));return t};it.add=Ff;it.addAll=Bf;it.cover=Df;it.data=Rf;it.extent=Hf;it.find=zf;it.remove=Vf;it.removeAll=Gf;it.root=Uf;it.size=qf;it.visit=jf;it.visitAfter=Kf;it.x=Jf;it.y=Zf;function Mt(t){return function(){return t}}var Xf={value:()=>{}};function da(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new He(n)}function He(t){this._=t}function Qf(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}He.prototype=da.prototype={constructor:He,on:function(t,e){var n=this._,r=Qf(t+"",n),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=td(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(i=(t=r[a]).type)n[i]=Wr(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Wr(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new He(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};function td(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Wr(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Xf,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}const ed=1664525,nd=1013904223,Jr=4294967296;function rd(){let t=1;return()=>(t=(ed*t+nd)%Jr)/Jr}var id=10,ad=Math.PI*(3-Math.sqrt(5));function ha(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,s=.6,l=new Map,o=Fi(d),u=da("tick","end"),f=rd();t==null&&(t=[]);function d(){h(),u.call("tick",e),n<r&&(o.stop(),u.call("end",e))}function h(v){var p,x=t.length,w;v===void 0&&(v=1);for(var S=0;S<v;++S)for(n+=(a-n)*i,l.forEach(function(P){P(n)}),p=0;p<x;++p)w=t[p],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return e}function g(){for(var v=0,p=t.length,x;v<p;++v){if(x=t[v],x.index=v,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var w=id*Math.sqrt(.5+v),S=v*ad;x.x=w*Math.cos(S),x.y=w*Math.sin(S)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function y(v){return v.initialize&&v.initialize(t,f),v}return g(),e={tick:h,restart:function(){return o.restart(d),e},stop:function(){return o.stop(),e},nodes:function(v){return arguments.length?(t=v,g(),l.forEach(y),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(r=+v,e):r},alphaDecay:function(v){return arguments.length?(i=+v,e):+i},alphaTarget:function(v){return arguments.length?(a=+v,e):a},velocityDecay:function(v){return arguments.length?(s=1-v,e):1-s},randomSource:function(v){return arguments.length?(f=v,l.forEach(y),e):f},force:function(v,p){return arguments.length>1?(p==null?l.delete(v):l.set(v,y(p)),e):l.get(v)},find:function(v,p,x){var w=0,S=t.length,P,k,I,M,B;for(x==null?x=1/0:x*=x,w=0;w<S;++w)M=t[w],P=v-M.x,k=p-M.y,I=P*P+k*k,I<x&&(B=M,x=I);return B},on:function(v,p){return arguments.length>1?(u.on(v,p),e):u.on(v)}}}function ma(t){var e=Mt(.1),n,r,i;typeof t!="function"&&(t=Mt(t==null?0:+t));function a(l){for(var o=0,u=n.length,f;o<u;++o)f=n[o],f.vx+=(i[o]-f.x)*r[o]*l}function s(){if(n){var l,o=n.length;for(r=new Array(o),i=new Array(o),l=0;l<o;++l)r[l]=isNaN(i[l]=+t(n[l],l,n))?0:+e(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Mt(+l),s(),a):e},a.x=function(l){return arguments.length?(t=typeof l=="function"?l:Mt(+l),s(),a):t},a}function ga(t){var e=Mt(.1),n,r,i;typeof t!="function"&&(t=Mt(t==null?0:+t));function a(l){for(var o=0,u=n.length,f;o<u;++o)f=n[o],f.vy+=(i[o]-f.y)*r[o]*l}function s(){if(n){var l,o=n.length;for(r=new Array(o),i=new Array(o),l=0;l<o;++l)r[l]=isNaN(i[l]=+t(n[l],l,n))?0:+e(n[l],l,n)}}return a.initialize=function(l){n=l,s()},a.strength=function(l){return arguments.length?(e=typeof l=="function"?l:Mt(+l),s(),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:Mt(+l),s(),a):t},a}function od(t){function e(d){return d.x+d.vx}function n(d){return d.y+d.vy}function r(d){return function(){return d}}var i,a,s=1,l=1;typeof t!="function"&&(t=r(t===null?[[0,0][1]]:t));function o(){var d,h,g,y,v,p,x,w,S,P,k=[];i.forEach(function(A,C){k.push({node:A,vx:A.vx,vy:A.vy,x:A.x+(a[C][1][0]+a[C][0][0])/2,y:A.y+(a[C][0][1]+a[C][1][1])/2}),k.push({node:A,vx:A.vx,vy:A.vy,x:A.x+a[C][0][0],y:A.y+a[C][0][1]}),k.push({node:A,vx:A.vx,vy:A.vy,x:A.x+a[C][0][0],y:A.y+a[C][1][1]}),k.push({node:A,vx:A.vx,vy:A.vy,x:A.x+a[C][1][0],y:A.y+a[C][0][1]}),k.push({node:A,vx:A.vx,vy:A.vy,x:A.x+a[C][1][0],y:A.y+a[C][1][1]})});for(var I=k.length,M=0;M<l;++M)for(h=fa(k,e,n).visitAfter(u),d=0;d<I;++d){var B=~~(d/5);g=i[B],p=a[B],y=g.x+g.vx,v=g.y+g.vy,x=y+p[0][0],w=v+p[0][1],S=y+p[1][0],P=v+p[1][1],h.visit(R)}function R(A,C,V,D,q){var $=A.data;if($){var O=f(p,0),T=f(p,1);if($.node.index!==B){var N=$.node,b=a[N.index],F=N.x+N.vx+b[0][0],U=N.y+N.vy+b[0][1],j=N.x+N.vx+b[1][0],L=N.y+N.vy+b[1][1],z=f(b,0),G=f(b,1);if(x<=j&&F<=S&&w<=L&&U<=P){var X=[Math.min.apply(null,[F,j,x,S]),Math.max.apply(null,[F,j,x,S])],xe=[Math.min.apply(null,[U,L,w,P]),Math.max.apply(null,[U,L,w,P])],J=O+z-(X[1]-X[0]),Ct=T+G-(xe[1]-xe[0]),_e=J*s*(Ct/T),ct=Ct*s*(J/O),ne=J*s*(Ct/G),re=Ct*s*(J/z);(x+S)/2<(F+j)/2?(g.vx-=_e,N.vx+=ne):(g.vx+=_e,N.vx-=ne),(w+P)/2<(U+L)/2?(g.vy-=ct,N.vy+=re):(g.vy+=ct,N.vy-=re)}}return}return C>S||D<x||V>P||q<w}}function u(d){if(d.data)return d.bb=a[d.data.node.index];d.bb=[[0,0],[0,0]];for(var h=0;h<4;++h)d[h]&&d[h].bb[0][0]<d.bb[0][0]&&(d.bb[0][0]=d[h].bb[0][0]),d[h]&&d[h].bb[0][1]<d.bb[0][1]&&(d.bb[0][1]=d[h].bb[0][1]),d[h]&&d[h].bb[1][0]>d.bb[1][0]&&(d.bb[1][0]=d[h].bb[1][0]),d[h]&&d[h].bb[1][1]>d.bb[1][1]&&(d.bb[1][1]=d[h].bb[1][1])}function f(d,h){return d[1][h]-d[0][h]}return o.initialize=function(d){var h,g=(i=d).length;for(a=new Array(g),h=0;h<g;++h)a[h]=t(i[h],h,i)},o.iterations=function(d){return arguments.length?(l=+d,o):l},o.strength=function(d){return arguments.length?(s=+d,o):s},o.bbox=function(d){return arguments.length?(t=typeof d=="function"?d:r(+d),o):t},o}const pa=({sim:t,update:e,runtime:n,iterations:r})=>{n?t.on("tick",()=>{e()}).restart():sd(t,e,r)},sd=(t,e,n)=>{let r,i=n||Math.ceil(Math.log(t.alphaMin())/Math.log(1-t.alphaDecay()));for(r=0;r<i;r++)t.tick(),e()},ld=(t,e)=>{const n=t.getBBox(),r=n.x-e.x,i=n.y-e.y,a=n.width+e.x*2,s=n.height+e.y*2;return{x:r,y:i,width:a,height:s}},ud=(t,e)=>{const n=e.x-t.x,r=e.y-t.y,i=e.x+e.width-t.x,a=e.y+e.height-t.y;return{top:r,left:n,right:i,bottom:a}},va=({nodes:t,elements:e,margin:n})=>t.map((r,i)=>({...r,bboxOffset:ud(r,ld(e[i],n))})),en=t=>({left:t.x+t.bboxOffset.left,right:t.x+t.bboxOffset.right,top:t.y+t.bboxOffset.top,bottom:t.y+t.bboxOffset.bottom}),cd=t=>({x:(t.left+t.right)/2,y:(t.top+t.bottom)/2}),ya=(t=1)=>od((e,n)=>[[e.bboxOffset.left,e.bboxOffset.top],[e.bboxOffset.right,e.bboxOffset.bottom]]).strength(t).iterations(2),xa=(t,e)=>{let n;const r={left:0,right:t,top:0,bottom:e};let i=()=>{n&&n.forEach((a,s)=>{const{left:l,right:o,top:u,bottom:f}=a.bboxOffset;a.x+l<r.left&&(a.x=r.left-l),a.x+o>r.right&&(a.x=r.right-o),a.y+u<r.top&&(a.y=r.top-u),a.y+f>r.bottom&&(a.y=r.bottom-f)})};return i.initialize=a=>{n=a},i},_a=({moonCenter:t,moonRadius:e,side:n="inner"})=>{let r;const i=n=="inner"?1:-1,a=({dist:l})=>n=="inner"?l<0:l>0;let s=()=>{r&&r.forEach((l,o)=>{const u=[["left","top"],["right","top"],["right","bottom"],["left","bottom"]].map(g=>{const y={x:l.x+l.bboxOffset[g[0]],y:l.y+l.bboxOffset[g[1]]};return{dist:aa(y,t)-e,loc:y}}).filter(a);if(u.length<=0)return;const f=u.reduce((g,y)=>(y.dist<g.dist&&(g=y),g),{dist:Number.MAX_VALUE}),d=Dt(f.loc,t),h=pe(d,Math.abs(f.dist));l.x=l.x+h.x*i,l.y=l.y-h.y*i})};return s.initialize=l=>{r=l},s},Zt=(t,e)=>t.x<e.x?"end":"start",ba=(t,e)=>t.y<e.y?"auto":"hanging",wa=({texts:t,width:e,x:n,y:r,lineHeight:i=1.1})=>{t.attr("y",r),t.each(function(a){const s=xt(this),l=s.text();if(!l)return;let o=l.split(/[\s\t\r\n]+/).reverse().filter(h=>h!==""),u,f=[],d=s.text(null).append("tspan").attr("x",n(a)).attr("dy","0em");for(;u=o.pop();)f.push(u),d.text(f.join(" ")),d.node().getComputedTextLength()>e&&f.length>1&&(f.pop(),d.text(f.join(" ")),f=[u],d=s.append("tspan").attr("x",n(a)).attr("dy",i+"em").text(u))})},_t=(t,e)=>{const n=xt(t);return{selection:n,datum:n.datum(),event:e}},fd=({container:t,center:e,radius:n,color:r,thickness:i=1})=>{const a=t.append("circle").attr("class","radial-line").attr("fill","transparent").attr("stroke","transparent").attr("stroke-width",i).attr("cx",e.x).attr("cy",e.y).attr("r",n);return{update:o=>a.attr("stroke",r).attr("transform",o&&`rotate(${Tf(Dt(o)-Math.PI)}, ${e.x}, ${e.y})`),reset:()=>a.attr("stroke","transparent")}},dd=({container:t,moonCenter:e,moonRadius:n,nBins:r})=>{const l=t.append("g").attr("class","magnitude-grid-circle-container");[...Array(r-1).keys()].map(o=>n*(o+1)/r).forEach((o,u)=>{l.append("circle").attr("class","magnitude-grid-circle").attr("cx",e.x).attr("cy",e.y).attr("r",o).attr("stroke",`rgba(0, 0, 0, ${.012})`).attr("stroke-width",1).attr("fill",`rgba(0, 0, 0, ${.014})`)})},Yr=({container:t,x:e,y:n,radius:r,color:i,stroke:a="transparent",opacity:s=1,className:l})=>t.append("circle").attr("class",l).attr("fill",i).attr("stroke",a).attr("opacity",s).attr("cx",e).attr("cy",n).attr("r",r),hd=(t,{target:e})=>{const n=e(t),r=en(t),i=cd(r),a=n.y<r.top&&n.x<r.right&&n.x>r.left?r.top:r.bottom,s={y:a,x:Zt(i,n)==="start"?r.right:r.left},l={y:a,x:Zt(i,n)==="start"?r.left:r.right},o=n.x<r.right&&n.x>r.left?n.x-r.left<r.right-n.x?r.left:r.right:Zt(i,n)==="start"?r.left:r.right,u={y:a,x:o};return`M ${s.x} ${s.y}L ${l.x} ${l.y}L ${u.x} ${u.y}L ${n.x} ${n.y}`},md=(t,{target:e,midCoord:n})=>{const r=e(t),i=5,a=Zt(t,r)=="end"?i:-i,s=`M ${t.x+a} ${t.y}`,l=`L ${r.x} ${r.y}`;if(aa(r,t)<20)return s+l;const o=n(t),u=`L ${o.x} ${o.y}`;return s+u+l},Zr=!1,Xr=!1,Aa="rgba(255, 87, 34, 0.1)",gd=({outerCoords:t,outerTextRadiusOffset:e,moonCenter:n,xscale:r,yscale:i})=>t.map(a=>{const s=Dt(a.screenCoord,n),o=Cf(a)*e,u=pe(s,o),f={x:r(u.x),y:i(u.y)},d=pe(s,o*1.4),h={x:r(d.x),y:i(d.y)};return{...a,textCoord:f,textCoordInit:h}}),pd=({container:t,width:e,height:n,moonCenter:r,moonRadius:i,xscale:a,yscale:s,outerCoords:l,outerTextRadiusOffset:o,textSize:u,textOpacity:f,textMaxWidth:d,textMargin:h,connectorColor:g,bboxColor:y,font:v,enableDebug:p=!1,runtimeLayout:x=!1})=>{const w=new ve,S=(b,F)=>va({nodes:b.map((U,j)=>({...U,x:U.textCoordInit.x,y:U.textCoordInit.y})),elements:F,margin:h}),P=b=>{const F=t.append("g").attr("class","outer-texts").selectAll("g").data(b).join("g"),U=F.append("text").attr("font-size",u).attr("opacity",f).style("pointer-events","none").attr("text-anchor",z=>Zt(z.textCoord,z.screenCoord)).attr("dominant-baseline",z=>ba(z.textCoord,z.screenCoord)).text(z=>z.name);wa({texts:U,width:d,x:z=>z.textCoordInit.x,y:z=>z.textCoordInit.y});const j=F.append("path").attr("class","connector").attr("stroke","transparent").attr("fill","transparent").style("pointer-events","none"),L=F.append("rect").attr("class","bbox").attr("fill",p?Aa:"transparent").on("mouseenter",function(z){w.emit("hover:in",_t(this.parentNode,z))}).on("mouseout",function(z){w.emit("hover:out",_t(this.parentNode,z))}).on("pointerup",function(z){w.emit("selected",_t(this.parentNode,z))});return{join:F,texts:U,connectors:j,bboxes:L}},k=()=>{w.removeAllListeners("hover:in"),w.removeAllListeners("hover:out"),w.removeAllListeners("selected"),$.bboxes.on("mouseenter",null),$.bboxes.on("mouseout",null),$.bboxes.on("pointerup",null)},I=(b,F)=>ha().nodes(S(b,F.texts.nodes())).force("x",ma(U=>U.textCoord.x).strength(.1)).force("y",ga(U=>U.textCoord.y).strength(.1)).force("bounds",xa(e,n)).force("collision",ya()).force("moon",_a({moonCenter:r,moonRadius:i})).stop(),M=()=>{const b=O.nodes(),F=$.texts.nodes(),U=$.connectors.nodes(),j=$.bboxes.nodes();b.forEach((L,z)=>{xt(F[z]).attr("y",L.y).selectAll("tspan").attr("x",L.x),xt(U[z]).attr("d",hd(L,{target:X=>X.screenCoord}));const G=en(L);xt(j[z]).attr("x",G.left).attr("y",G.top).attr("width",G.right-G.left).attr("height",G.bottom-G.top)}),T.clear(),T.renderLinks(b)},B=(b,F)=>$.join.select((U,j,L)=>U.id===b.id?L[j]:null).select(F),R=b=>B(b,".connector").attr("stroke",g),A=b=>B(b,".connector").attr("stroke","transparent"),C=()=>$.connectors.attr("stroke","transparent"),V=b=>{if(p)return;(b?B(b,".bbox"):$.bboxes).attr("fill",y)},D=b=>{if(p)return;(b?B(b,".bbox"):$.bboxes).attr("fill","transparent")},q=gd({outerCoords:l,outerTextRadiusOffset:o,moonCenter:r,xscale:a,yscale:s}),$=P(q),O=I(q,$),T=vd(p,t);pa({sim:O,update:M,runtime:x});const N={on:(b,F)=>w.on(b,F)&&N,color:(b,F)=>Vn({selection:$.texts,value:F||b,datum:F&&b}),addConnector:R,removeConnector:A,removeAllConnectors:C,showBBox:V,hideBBox:D,dispose:k};return N},vd=(t,e)=>{const n=t&&e.insert("g",":first-child").attr("class","debug");return{clear:()=>{t&&n.selectAll("*").remove()},renderLinks:a=>{t&&a.forEach(s=>{n.append("line").attr("x1",s.x).attr("y1",s.y).attr("x2",s.textCoord.x).attr("y2",s.textCoord.y).attr("stroke","rgba(255, 0, 0, 1)"),n.append("line").attr("x1",s.textCoord.x).attr("y1",s.textCoord.y).attr("x2",s.screenCoord.x).attr("y2",s.screenCoord.y).attr("stroke","rgba(255, 0, 0, .25)")})}}},Qr=Math.pow(2,-52),Oe=new Uint32Array(512);class Je{static from(e,n=wd,r=Ad){const i=e.length,a=new Float64Array(i*2);for(let s=0;s<i;s++){const l=e[s];a[2*s]=n(l),a[2*s+1]=r(l)}return new Je(a)}constructor(e){const n=e.length>>1;if(n>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:e,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:a}=this,s=e.length>>1;let l=1/0,o=1/0,u=-1/0,f=-1/0;for(let A=0;A<s;A++){const C=e[2*A],V=e[2*A+1];C<l&&(l=C),V<o&&(o=V),C>u&&(u=C),V>f&&(f=V),this._ids[A]=A}const d=(l+u)/2,h=(o+f)/2;let g=1/0,y,v,p;for(let A=0;A<s;A++){const C=yn(d,h,e[2*A],e[2*A+1]);C<g&&(y=A,g=C)}const x=e[2*y],w=e[2*y+1];g=1/0;for(let A=0;A<s;A++){if(A===y)continue;const C=yn(x,w,e[2*A],e[2*A+1]);C<g&&C>0&&(v=A,g=C)}let S=e[2*v],P=e[2*v+1],k=1/0;for(let A=0;A<s;A++){if(A===y||A===v)continue;const C=_d(x,w,S,P,e[2*A],e[2*A+1]);C<k&&(p=A,k=C)}let I=e[2*p],M=e[2*p+1];if(k===1/0){for(let V=0;V<s;V++)this._dists[V]=e[2*V]-e[0]||e[2*V+1]-e[1];Wt(this._ids,this._dists,0,s-1);const A=new Uint32Array(s);let C=0;for(let V=0,D=-1/0;V<s;V++){const q=this._ids[V];this._dists[q]>D&&(A[C++]=q,D=this._dists[q])}this.hull=A.subarray(0,C),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Fe(x,w,S,P,I,M)){const A=v,C=S,V=P;v=p,S=I,P=M,p=A,I=C,M=V}const B=bd(x,w,S,P,I,M);this._cx=B.x,this._cy=B.y;for(let A=0;A<s;A++)this._dists[A]=yn(e[2*A],e[2*A+1],B.x,B.y);Wt(this._ids,this._dists,0,s-1),this._hullStart=y;let R=3;r[y]=n[p]=v,r[v]=n[y]=p,r[p]=n[v]=y,i[y]=0,i[v]=1,i[p]=2,a.fill(-1),a[this._hashKey(x,w)]=y,a[this._hashKey(S,P)]=v,a[this._hashKey(I,M)]=p,this.trianglesLen=0,this._addTriangle(y,v,p,-1,-1,-1);for(let A=0,C,V;A<this._ids.length;A++){const D=this._ids[A],q=e[2*D],$=e[2*D+1];if(A>0&&Math.abs(q-C)<=Qr&&Math.abs($-V)<=Qr||(C=q,V=$,D===y||D===v||D===p))continue;let O=0;for(let U=0,j=this._hashKey(q,$);U<this._hashSize&&(O=a[(j+U)%this._hashSize],!(O!==-1&&O!==r[O]));U++);O=n[O];let T=O,N;for(;N=r[T],!Fe(q,$,e[2*T],e[2*T+1],e[2*N],e[2*N+1]);)if(T=N,T===O){T=-1;break}if(T===-1)continue;let b=this._addTriangle(T,D,r[T],-1,-1,i[T]);i[D]=this._legalize(b+2),i[T]=b,R++;let F=r[T];for(;N=r[F],Fe(q,$,e[2*F],e[2*F+1],e[2*N],e[2*N+1]);)b=this._addTriangle(F,D,N,i[D],-1,i[F]),i[D]=this._legalize(b+2),r[F]=F,R--,F=N;if(T===O)for(;N=n[T],Fe(q,$,e[2*N],e[2*N+1],e[2*T],e[2*T+1]);)b=this._addTriangle(N,D,T,-1,i[T],i[N]),this._legalize(b+2),i[N]=b,r[T]=T,R--,T=N;this._hullStart=n[D]=T,r[T]=n[F]=D,r[D]=F,a[this._hashKey(q,$)]=D,a[this._hashKey(e[2*T],e[2*T+1])]=T}this.hull=new Uint32Array(R);for(let A=0,C=this._hullStart;A<R;A++)this.hull[A]=C,C=r[C];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,n){return Math.floor(yd(e-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:n,_halfedges:r,coords:i}=this;let a=0,s=0;for(;;){const l=r[e],o=e-e%3;if(s=o+(e+2)%3,l===-1){if(a===0)break;e=Oe[--a];continue}const u=l-l%3,f=o+(e+1)%3,d=u+(l+2)%3,h=n[s],g=n[e],y=n[f],v=n[d];if(xd(i[2*h],i[2*h+1],i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1])){n[e]=v,n[l]=h;const x=r[d];if(x===-1){let S=this._hullStart;do{if(this._hullTri[S]===d){this._hullTri[S]=e;break}S=this._hullPrev[S]}while(S!==this._hullStart)}this._link(e,x),this._link(l,r[s]),this._link(s,d);const w=u+(l+1)%3;a<Oe.length&&(Oe[a++]=w)}else{if(a===0)break;e=Oe[--a]}}return s}_link(e,n){this._halfedges[e]=n,n!==-1&&(this._halfedges[n]=e)}_addTriangle(e,n,r,i,a,s){const l=this.trianglesLen;return this._triangles[l]=e,this._triangles[l+1]=n,this._triangles[l+2]=r,this._link(l,i),this._link(l+1,a),this._link(l+2,s),this.trianglesLen+=3,l}}function yd(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}function yn(t,e,n,r){const i=t-n,a=e-r;return i*i+a*a}function xn(t,e,n,r,i,a){const s=(r-e)*(i-t),l=(n-t)*(a-e);return Math.abs(s-l)>=33306690738754716e-32*Math.abs(s+l)?s-l:0}function Fe(t,e,n,r,i,a){return(xn(i,a,t,e,n,r)||xn(t,e,n,r,i,a)||xn(n,r,i,a,t,e))<0}function xd(t,e,n,r,i,a,s,l){const o=t-s,u=e-l,f=n-s,d=r-l,h=i-s,g=a-l,y=o*o+u*u,v=f*f+d*d,p=h*h+g*g;return o*(d*p-v*g)-u*(f*p-v*h)+y*(f*g-d*h)<0}function _d(t,e,n,r,i,a){const s=n-t,l=r-e,o=i-t,u=a-e,f=s*s+l*l,d=o*o+u*u,h=.5/(s*u-l*o),g=(u*f-l*d)*h,y=(s*d-o*f)*h;return g*g+y*y}function bd(t,e,n,r,i,a){const s=n-t,l=r-e,o=i-t,u=a-e,f=s*s+l*l,d=o*o+u*u,h=.5/(s*u-l*o),g=t+(u*f-l*d)*h,y=e+(s*d-o*f)*h;return{x:g,y}}function Wt(t,e,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const a=t[i],s=e[a];let l=i-1;for(;l>=n&&e[t[l]]>s;)t[l+1]=t[l--];t[l+1]=a}else{const i=n+r>>1;let a=n+1,s=r;le(t,i,a),e[t[n]]>e[t[r]]&&le(t,n,r),e[t[a]]>e[t[r]]&&le(t,a,r),e[t[n]]>e[t[a]]&&le(t,n,a);const l=t[a],o=e[l];for(;;){do a++;while(e[t[a]]<o);do s--;while(e[t[s]]>o);if(s<a)break;le(t,a,s)}t[n+1]=t[s],t[s]=l,r-a+1>=s-n?(Wt(t,e,a,r),Wt(t,e,n,s-1)):(Wt(t,e,n,s-1),Wt(t,e,a,r))}}function le(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function wd(t){return t[0]}function Ad(t){return t[1]}const ti=1e-6;class It{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,n){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,n){this._+=`L${this._x1=+e},${this._y1=+n}`}arc(e,n,r){e=+e,n=+n,r=+r;const i=e+r,a=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${a}`:(Math.abs(this._x1-i)>ti||Math.abs(this._y1-a)>ti)&&(this._+="L"+i+","+a),r&&(this._+=`A${r},${r},0,1,1,${e-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=a}`)}rect(e,n,r,i){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class En{constructor(){this._=[]}moveTo(e,n){this._.push([e,n])}closePath(){this._.push(this._[0].slice())}lineTo(e,n){this._.push([e,n])}value(){return this._.length?this._:null}}class Sd{constructor(e,[n,r,i,a]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((a=+a)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=i,this.xmin=n,this.ymax=a,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:n,triangles:r},vectors:i}=this,a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,y=0,v=r.length,p,x;g<v;g+=3,y+=2){const w=r[g]*2,S=r[g+1]*2,P=r[g+2]*2,k=e[w],I=e[w+1],M=e[S],B=e[S+1],R=e[P],A=e[P+1],C=M-k,V=B-I,D=R-k,q=A-I,$=C*C+V*V,O=D*D+q*q,T=(C*q-V*D)*2;if(!T)p=(k+R)/2-1e8*q,x=(I+A)/2+1e8*D;else if(Math.abs(T)<1e-8)p=(k+R)/2,x=(I+A)/2;else{const N=1/T;p=k+(q*$-V*O)*N,x=I+(C*O-D*$)*N}a[y]=p,a[y+1]=x}let s=n[n.length-1],l,o=s*4,u,f=e[2*s],d,h=e[2*s+1];i.fill(0);for(let g=0;g<n.length;++g)s=n[g],l=o,u=f,d=h,o=s*4,f=e[2*s],h=e[2*s+1],i[l+2]=i[o]=d-h,i[l+3]=i[o+1]=f-u}render(e){const n=e==null?e=new It:void 0,{delaunay:{halfedges:r,inedges:i,hull:a},circumcenters:s,vectors:l}=this;if(a.length<=1)return null;for(let f=0,d=r.length;f<d;++f){const h=r[f];if(h<f)continue;const g=Math.floor(f/3)*2,y=Math.floor(h/3)*2,v=s[g],p=s[g+1],x=s[y],w=s[y+1];this._renderSegment(v,p,x,w,e)}let o,u=a[a.length-1];for(let f=0;f<a.length;++f){o=u,u=a[f];const d=Math.floor(i[u]/3)*2,h=s[d],g=s[d+1],y=o*4,v=this._project(h,g,l[y+2],l[y+3]);v&&this._renderSegment(h,g,v[0],v[1],e)}return n&&n.value()}renderBounds(e){const n=e==null?e=new It:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(e,n){const r=n==null?n=new It:void 0,i=this._clip(e);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let a=i.length;for(;i[0]===i[a-2]&&i[1]===i[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(i[s]!==i[s-2]||i[s+1]!==i[s-1])&&n.lineTo(i[s],i[s+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let n=0,r=e.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(e){const n=new En;return this.renderCell(e,n),n.value()}_renderSegment(e,n,r,i,a){let s;const l=this._regioncode(e,n),o=this._regioncode(r,i);l===0&&o===0?(a.moveTo(e,n),a.lineTo(r,i)):(s=this._clipSegment(e,n,r,i,l,o))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(e,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(e,n,r)===e}*neighbors(e){const n=this._clip(e);if(n)for(const r of this.delaunay.neighbors(e)){const i=this._clip(r);if(i){t:for(let a=0,s=n.length;a<s;a+=2)for(let l=0,o=i.length;l<o;l+=2)if(n[a]==i[l]&&n[a+1]==i[l+1]&&n[(a+2)%s]==i[(l+o-2)%o]&&n[(a+3)%s]==i[(l+o-1)%o]){yield r;break t}}}}_cell(e){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:a}}=this,s=r[e];if(s===-1)return null;const l=[];let o=s;do{const u=Math.floor(o/3);if(l.push(n[u*2],n[u*2+1]),o=o%3===2?o-2:o+1,a[o]!==e)break;o=i[o]}while(o!==s&&o!==-1);return l}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(e);if(n===null)return null;const{vectors:r}=this,i=e*4;return r[i]||r[i+1]?this._clipInfinite(e,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(e,n)}_clipFinite(e,n){const r=n.length;let i=null,a,s,l=n[r-2],o=n[r-1],u,f=this._regioncode(l,o),d,h;for(let g=0;g<r;g+=2)if(a=l,s=o,l=n[g],o=n[g+1],u=f,f=this._regioncode(l,o),u===0&&f===0)d=h,h=0,i?i.push(l,o):i=[l,o];else{let y,v,p,x,w;if(u===0){if((y=this._clipSegment(a,s,l,o,u,f))===null)continue;[v,p,x,w]=y}else{if((y=this._clipSegment(l,o,a,s,f,u))===null)continue;[x,w,v,p]=y,d=h,h=this._edgecode(v,p),d&&h&&this._edge(e,d,h,i,i.length),i?i.push(v,p):i=[v,p]}d=h,h=this._edgecode(x,w),d&&h&&this._edge(e,d,h,i,i.length),i?i.push(x,w):i=[x,w]}if(i)d=h,h=this._edgecode(i[0],i[1]),d&&h&&this._edge(e,d,h,i,i.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(e,n,r,i,a,s){for(;;){if(a===0&&s===0)return[e,n,r,i];if(a&s)return null;let l,o,u=a||s;u&8?(l=e+(r-e)*(this.ymax-n)/(i-n),o=this.ymax):u&4?(l=e+(r-e)*(this.ymin-n)/(i-n),o=this.ymin):u&2?(o=n+(i-n)*(this.xmax-e)/(r-e),l=this.xmax):(o=n+(i-n)*(this.xmin-e)/(r-e),l=this.xmin),a?(e=l,n=o,a=this._regioncode(e,n)):(r=l,i=o,s=this._regioncode(r,i))}}_clipInfinite(e,n,r,i,a,s){let l=Array.from(n),o;if((o=this._project(l[0],l[1],r,i))&&l.unshift(o[0],o[1]),(o=this._project(l[l.length-2],l[l.length-1],a,s))&&l.push(o[0],o[1]),l=this._clipFinite(e,l))for(let u=0,f=l.length,d,h=this._edgecode(l[f-2],l[f-1]);u<f;u+=2)d=h,h=this._edgecode(l[u],l[u+1]),d&&h&&(u=this._edge(e,d,h,l,u),f=l.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(l=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return l}_edge(e,n,r,i,a){for(;n!==r;){let s,l;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,l=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,l=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,l=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,l=this.ymin;break}(i[a]!==s||i[a+1]!==l)&&this.contains(e,s,l)&&(i.splice(a,0,s,l),a+=2)}if(i.length>4)for(let s=0;s<i.length;s+=2){const l=(s+2)%i.length,o=(s+4)%i.length;(i[s]===i[l]&&i[l]===i[o]||i[s+1]===i[l+1]&&i[l+1]===i[o+1])&&(i.splice(l,2),s-=2)}return a}_project(e,n,r,i){let a=1/0,s,l,o;if(i<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/i)<a&&(o=this.ymin,l=e+(a=s)*r)}else if(i>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/i)<a&&(o=this.ymax,l=e+(a=s)*r)}if(r>0){if(e>=this.xmax)return null;(s=(this.xmax-e)/r)<a&&(l=this.xmax,o=n+(a=s)*i)}else if(r<0){if(e<=this.xmin)return null;(s=(this.xmin-e)/r)<a&&(l=this.xmin,o=n+(a=s)*i)}return[l,o]}_edgecode(e,n){return(e===this.xmin?1:e===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(e,n){return(e<this.xmin?1:e>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Md=2*Math.PI,Gt=Math.pow;function Cd(t){return t[0]}function Td(t){return t[1]}function $d(t){const{triangles:e,coords:n}=t;for(let r=0;r<e.length;r+=3){const i=2*e[r],a=2*e[r+1],s=2*e[r+2];if((n[s]-n[i])*(n[a+1]-n[i+1])-(n[a]-n[i])*(n[s+1]-n[i+1])>1e-10)return!1}return!0}function Nd(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class qn{static from(e,n=Cd,r=Td,i){return new qn("length"in e?kd(e,n,r,i):Float64Array.from(Ed(e,n,r,i)))}constructor(e){this._delaunator=new Je(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,n=this.points;if(e.hull&&e.hull.length>2&&$d(e)){this.collinear=Int32Array.from({length:n.length/2},(h,g)=>g).sort((h,g)=>n[2*h]-n[2*g]||n[2*h+1]-n[2*g+1]);const o=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*o],n[2*o+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let h=0,g=n.length/2;h<g;++h){const y=Nd(n[2*h],n[2*h+1],d);n[2*h]=y[0],n[2*h+1]=y[1]}this._delaunator=new Je(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),l=this._hullIndex.fill(-1);for(let o=0,u=r.length;o<u;++o){const f=a[o%3===2?o-2:o+1];(r[o]===-1||s[f]===-1)&&(s[f]=o)}for(let o=0,u=i.length;o<u;++o)l[i[o]]=o;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],s[i[0]]=1,i.length===2&&(s[i[1]]=0))}voronoi(e){return new Sd(this,e)}*neighbors(e){const{inedges:n,hull:r,_hullIndex:i,halfedges:a,triangles:s,collinear:l}=this;if(l){const d=l.indexOf(e);d>0&&(yield l[d-1]),d<l.length-1&&(yield l[d+1]);return}const o=n[e];if(o===-1)return;let u=o,f=-1;do{if(yield f=s[u],u=u%3===2?u-2:u+1,s[u]!==e)return;if(u=a[u],u===-1){const d=r[(i[e]+1)%r.length];d!==f&&(yield d);return}}while(u!==o)}find(e,n,r=0){if(e=+e,e!==e||(n=+n,n!==n))return-1;const i=r;let a;for(;(a=this._step(r,e,n))>=0&&a!==r&&a!==i;)r=a;return a}_step(e,n,r){const{inedges:i,hull:a,_hullIndex:s,halfedges:l,triangles:o,points:u}=this;if(i[e]===-1||!u.length)return(e+1)%(u.length>>1);let f=e,d=Gt(n-u[e*2],2)+Gt(r-u[e*2+1],2);const h=i[e];let g=h;do{let y=o[g];const v=Gt(n-u[y*2],2)+Gt(r-u[y*2+1],2);if(v<d&&(d=v,f=y),g=g%3===2?g-2:g+1,o[g]!==e)break;if(g=l[g],g===-1){if(g=a[(s[e]+1)%a.length],g!==y&&Gt(n-u[g*2],2)+Gt(r-u[g*2+1],2)<d)return g;break}}while(g!==h);return f}render(e){const n=e==null?e=new It:void 0,{points:r,halfedges:i,triangles:a}=this;for(let s=0,l=i.length;s<l;++s){const o=i[s];if(o<s)continue;const u=a[s]*2,f=a[o]*2;e.moveTo(r[u],r[u+1]),e.lineTo(r[f],r[f+1])}return this.renderHull(e),n&&n.value()}renderPoints(e,n=2){const r=e==null?e=new It:void 0,{points:i}=this;for(let a=0,s=i.length;a<s;a+=2){const l=i[a],o=i[a+1];e.moveTo(l+n,o),e.arc(l,o,n,0,Md)}return r&&r.value()}renderHull(e){const n=e==null?e=new It:void 0,{hull:r,points:i}=this,a=r[0]*2,s=r.length;e.moveTo(i[a],i[a+1]);for(let l=1;l<s;++l){const o=2*r[l];e.lineTo(i[o],i[o+1])}return e.closePath(),n&&n.value()}hullPolygon(){const e=new En;return this.renderHull(e),e.value()}renderTriangle(e,n){const r=n==null?n=new It:void 0,{points:i,triangles:a}=this,s=a[e*=3]*2,l=a[e+1]*2,o=a[e+2]*2;return n.moveTo(i[s],i[s+1]),n.lineTo(i[l],i[l+1]),n.lineTo(i[o],i[o+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:e}=this;for(let n=0,r=e.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(e){const n=new En;return this.renderTriangle(e,n),n.value()}}function kd(t,e,n,r){const i=t.length,a=new Float64Array(i*2);for(let s=0;s<i;++s){const l=t[s];a[s*2]=e.call(r,l,s,t),a[s*2+1]=n.call(r,l,s,t)}return a}function*Ed(t,e,n,r){let i=0;for(const a of t)yield e.call(r,a,i,t),yield n.call(r,a,i,t),++i}function Pd(t){for(var e=-1,n=t.length,r,i=t[n-1],a=0;++e<n;)r=i,i=t[e],a+=r[1]*i[0]-r[0]*i[1];return a/2}function Sa(t){for(var e=-1,n=t.length,r=0,i=0,a,s=t[n-1],l,o=0;++e<n;)a=s,s=t[e],o+=l=a[0]*s[1]-s[0]*a[1],r+=(a[0]+s[0])*l,i+=(a[1]+s[1])*l;return o*=3,[r/o,i/o]}const Id=({innerCoords:t,pointRadius:e,moonRadius:n,moonCenter:r,cells:i})=>t.map((a,s)=>{const l=a.screenCoord,o=Sa(i[s]||[]),u=a.magnitude>.9?Dt(l,r):Dt(l,{x:o[0],y:o[1]}),f=oa(e,a),d=pe(u,f*-2),h={x:l.x+d.x,y:l.y-d.y},g=pe(u,f*-10),y={x:l.x+g.x,y:l.y-g.y};return{...a,textCoord:h,textCoordInit:y}}).filter((a,s)=>-Pd(i[s]||[])>1e4),Ld=({container:t,width:e,height:n,moonCenter:r,moonRadius:i,innerCoords:a,pointRadius:s,pointMargin:l,textSize:o,textOpacity:u,textMaxWidth:f,textMargin:d,connectorColor:h,bboxColor:g,font:y,enableDebug:v=!1,runtimeLayout:p=!1})=>{const x=new ve,w=T=>{const N=qn.from(T),b=N.voronoi([0,0,e,n]);return{cells:T.map((U,j)=>b.cellPolygon(j)),points:T,voronoi:b,delaunay:N}},S=(T,N)=>va({nodes:T.map((b,F)=>({...b,x:b.textCoordInit.x,y:b.textCoordInit.y})),elements:N,margin:d}).concat(T.map(b=>{const F=oa(s,b);return{...b,bboxOffset:{left:-(F+l),right:F+l,top:-(F+l),bottom:F+l},fx:b.screenCoord.x,fy:b.screenCoord.y}})),P=T=>{const N=t.append("g").attr("class","inner-texts").selectAll("g").data(T).join("g"),b=N.append("text").attr("font-size",o).attr("opacity",u).style("pointer-events","none").attr("text-anchor",j=>Zt(j.textCoord,j.screenCoord)).attr("dominant-baseline",j=>ba(j.textCoord,j.screenCoord)).text(j=>j.name);wa({texts:b,width:f,x:j=>j.textCoordInit.x,y:j=>j.textCoordInit.y});const F=N.append("path").attr("stroke",h).attr("fill","transparent").style("pointer-events","none"),U=N.append("rect").attr("class","bbox").attr("fill",v?Aa:"transparent").on("mouseenter",function(j){x.emit("hover:in",_t(this.parentNode,j))}).on("mouseout",function(j){x.emit("hover:out",_t(this.parentNode,j))}).on("pointerup",function(j){x.emit("selected",_t(this.parentNode,j))});return{join:N,texts:b,lines:F,bboxes:U}},k=()=>{x.removeAllListeners("hover:in"),x.removeAllListeners("hover:out"),x.removeAllListeners("selected"),D.bboxes.on("mouseenter",null),D.bboxes.on("mouseout",null),D.bboxes.on("pointerup",null)},I=(T,N)=>D.join.select((b,F,U)=>b.id===T.id?U[F]:null).select(N),M=T=>{if(v)return;(T?I(T,".bbox"):D.bboxes).attr("fill",g)},B=T=>{if(v)return;(T?I(T,".bbox"):D.bboxes).attr("fill","transparent")},R=(T,N)=>ha().nodes(S(T,N.texts.nodes())).force("x",ma(b=>b.textCoord.x).strength(.1)).force("y",ga(b=>b.textCoord.y).strength(.1)).force("bounds",xa(e,n)).force("collision",ya()).force("moon",_a({moonCenter:r,moonRadius:i,side:"outer"})).stop(),A=()=>{const T=q.nodes(),N=D.texts.nodes(),b=D.lines.nodes(),F=D.bboxes.nodes();T.forEach((U,j)=>{xt(N[j]).attr("y",U.y).selectAll("tspan").attr("x",U.x),xt(b[j]).attr("d",md(U,{target:z=>z.screenCoord,midCoord:z=>z.textCoord}));const L=en(U);xt(F[j]).attr("x",L.left).attr("y",L.top).attr("width",L.right-L.left).attr("height",L.bottom-L.top)}),$.clear(),$.renderLinks(T),$.renderPointsBBoxes(T),$.renderVoronoi(C)},C=w(a.map(T=>[T.screenCoord.x,T.screenCoord.y])),V=Id({innerCoords:a,pointRadius:s,moonRadius:i,moonCenter:r,...C}),D=P(V),q=R(V,D),$=Od(v,t);pa({sim:q,update:A,runtime:p});const O={on:(T,N)=>x.on(T,N)&&O,color:(T,N)=>Vn({selection:D.texts,value:N||T,datum:N&&T}),showBBox:M,hideBBox:B,dispose:k};return O},Od=(t,e)=>{const n=t&&e.insert("g",":first-child").attr("class","debug");return{clear:()=>{t&&n.selectAll("*").remove()},renderLinks:l=>{t&&l.forEach(o=>{n.append("line").attr("x1",o.x).attr("y1",o.y).attr("x2",o.textCoord.x).attr("y2",o.textCoord.y).attr("stroke","rgba(255, 0, 0, 1)"),n.append("line").attr("x1",o.textCoord.x).attr("y1",o.textCoord.y).attr("x2",o.screenCoord.x).attr("y2",o.screenCoord.y).attr("stroke","rgba(255, 0, 0, .25)")})},renderVoronoi:({cells:l,points:o,voronoi:u,delaunay:f})=>{t&&(n.append("g").attr("stroke","orange").selectAll("path").data(l).join("path").attr("d",(d,h)=>`M ${Sa(d||[])} L ${o[h]}`),n.append("path").attr("fill","none").attr("stroke","#ccc").attr("d",u.render()),n.append("path").attr("d",f.renderPoints(null,2)))},renderPointsBBoxes:l=>{t&&l.forEach(o=>{if(!o.fx||!o.fy)return;const u=en(o);n.append("rect").attr("fill","rgba(255, 0, 0, 0.3)").attr("x",u.left).attr("y",u.top).attr("width",u.right-u.left).attr("height",u.bottom-u.top)})}}},ei=({container:t,xscale:e,yscale:n,coords:r,color:i,opacity:a=1,radius:s,className:l})=>{const o=new ve,u=t.append("g").attr("class",l).selectAll("circle").data(r).join("circle").attr("class",h=>h.id).attr("fill",i).attr("opacity",a).attr("cx",h=>e(h.x)).attr("cy",h=>n(h.y)).attr("r",s);u.on("pointerup",function(h){o.emit("selected",_t(this,h))}).on("mouseenter",function(h){o.emit("hover:in",_t(this,h))}).on("mouseout",function(h){o.emit("hover:out",_t(this,h))});const d={on:(h,g)=>o.on(h,g)&&d,color:(h,g)=>Vn({selection:u,value:g||h,datum:g&&h}),dispose:()=>{o.removeAllListeners("hover:in"),o.removeAllListeners("hover:out"),o.removeAllListeners("selected"),u.on("mouseenter",null),u.on("mouseout",null),u.on("pointerup",null)}};return d};var Ye={exports:{}};Ye.exports;(function(t,e){var n=200,r="Expected a function",i="__lodash_hash_undefined__",a=1,s=2,l=1/0,o=9007199254740991,u="[object Arguments]",f="[object Array]",d="[object Boolean]",h="[object Date]",g="[object Error]",y="[object Function]",v="[object GeneratorFunction]",p="[object Map]",x="[object Number]",w="[object Object]",S="[object Promise]",P="[object RegExp]",k="[object Set]",I="[object String]",M="[object Symbol]",B="[object WeakMap]",R="[object ArrayBuffer]",A="[object DataView]",C="[object Float32Array]",V="[object Float64Array]",D="[object Int8Array]",q="[object Int16Array]",$="[object Int32Array]",O="[object Uint8Array]",T="[object Uint8ClampedArray]",N="[object Uint16Array]",b="[object Uint32Array]",F=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,j=/^\./,L=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,z=/[\\^$.*+?()[\]{}|]/g,G=/\\(\\)?/g,X=/^\[object .+?Constructor\]$/,xe=/^(?:0|[1-9]\d*)$/,J={};J[C]=J[V]=J[D]=J[q]=J[$]=J[O]=J[T]=J[N]=J[b]=!0,J[u]=J[f]=J[R]=J[d]=J[A]=J[h]=J[g]=J[y]=J[p]=J[x]=J[w]=J[P]=J[k]=J[I]=J[B]=!1;var Ct=typeof ut=="object"&&ut&&ut.Object===Object&&ut,_e=typeof self=="object"&&self&&self.Object===Object&&self,ct=Ct||_e||Function("return this")(),ne=e&&!e.nodeType&&e,re=ne&&!0&&t&&!t.nodeType&&t,Ma=re&&re.exports===ne,Kn=Ma&&Ct.process,Wn=function(){try{return Kn&&Kn.binding("util")}catch{}}(),Jn=Wn&&Wn.isTypedArray;function Ca(c,m){var _=c?c.length:0;return!!_&&Na(c,m,0)>-1}function Ta(c,m){for(var _=-1,E=c?c.length:0;++_<E;)if(m(c[_],_,c))return!0;return!1}function $a(c,m,_,E){for(var K=c.length,H=_+-1;++H<K;)if(m(c[H],H,c))return H;return-1}function Na(c,m,_){if(m!==m)return $a(c,ka,_);for(var E=_-1,K=c.length;++E<K;)if(c[E]===m)return E;return-1}function ka(c){return c!==c}function Ea(c){return function(m){return m==null?void 0:m[c]}}function Pa(c,m){for(var _=-1,E=Array(c);++_<c;)E[_]=m(_);return E}function Ia(c){return function(m){return c(m)}}function La(c,m){return c.has(m)}function Oa(c,m){return c==null?void 0:c[m]}function nn(c){var m=!1;if(c!=null&&typeof c.toString!="function")try{m=!!(c+"")}catch{}return m}function Fa(c){var m=-1,_=Array(c.size);return c.forEach(function(E,K){_[++m]=[K,E]}),_}function Ba(c,m){return function(_){return c(m(_))}}function rn(c){var m=-1,_=Array(c.size);return c.forEach(function(E){_[++m]=E}),_}var Da=Array.prototype,Ra=Function.prototype,be=Object.prototype,an=ct["__core-js_shared__"],Yn=function(){var c=/[^.]+$/.exec(an&&an.keys&&an.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Zn=Ra.toString,mt=be.hasOwnProperty,Ht=be.toString,Ha=RegExp("^"+Zn.call(mt).replace(z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xn=ct.Symbol,Qn=ct.Uint8Array,za=be.propertyIsEnumerable,Va=Da.splice,Ga=Ba(Object.keys,Object),on=Vt(ct,"DataView"),ie=Vt(ct,"Map"),sn=Vt(ct,"Promise"),zt=Vt(ct,"Set"),ln=Vt(ct,"WeakMap"),ae=Vt(Object,"create"),Ua=$t(on),qa=$t(ie),ja=$t(sn),Ka=$t(zt),Wa=$t(ln),we=Xn?Xn.prototype:void 0,un=we?we.valueOf:void 0,tr=we?we.toString:void 0;function Tt(c){var m=-1,_=c?c.length:0;for(this.clear();++m<_;){var E=c[m];this.set(E[0],E[1])}}function Ja(){this.__data__=ae?ae(null):{}}function Ya(c){return this.has(c)&&delete this.__data__[c]}function Za(c){var m=this.__data__;if(ae){var _=m[c];return _===i?void 0:_}return mt.call(m,c)?m[c]:void 0}function Xa(c){var m=this.__data__;return ae?m[c]!==void 0:mt.call(m,c)}function Qa(c,m){var _=this.__data__;return _[c]=ae&&m===void 0?i:m,this}Tt.prototype.clear=Ja,Tt.prototype.delete=Ya,Tt.prototype.get=Za,Tt.prototype.has=Xa,Tt.prototype.set=Qa;function gt(c){var m=-1,_=c?c.length:0;for(this.clear();++m<_;){var E=c[m];this.set(E[0],E[1])}}function to(){this.__data__=[]}function eo(c){var m=this.__data__,_=Ae(m,c);if(_<0)return!1;var E=m.length-1;return _==E?m.pop():Va.call(m,_,1),!0}function no(c){var m=this.__data__,_=Ae(m,c);return _<0?void 0:m[_][1]}function ro(c){return Ae(this.__data__,c)>-1}function io(c,m){var _=this.__data__,E=Ae(_,c);return E<0?_.push([c,m]):_[E][1]=m,this}gt.prototype.clear=to,gt.prototype.delete=eo,gt.prototype.get=no,gt.prototype.has=ro,gt.prototype.set=io;function pt(c){var m=-1,_=c?c.length:0;for(this.clear();++m<_;){var E=c[m];this.set(E[0],E[1])}}function ao(){this.__data__={hash:new Tt,map:new(ie||gt),string:new Tt}}function oo(c){return Se(this,c).delete(c)}function so(c){return Se(this,c).get(c)}function lo(c){return Se(this,c).has(c)}function uo(c,m){return Se(this,c).set(c,m),this}pt.prototype.clear=ao,pt.prototype.delete=oo,pt.prototype.get=so,pt.prototype.has=lo,pt.prototype.set=uo;function oe(c){var m=-1,_=c?c.length:0;for(this.__data__=new pt;++m<_;)this.add(c[m])}function co(c){return this.__data__.set(c,i),this}function fo(c){return this.__data__.has(c)}oe.prototype.add=oe.prototype.push=co,oe.prototype.has=fo;function vt(c){this.__data__=new gt(c)}function ho(){this.__data__=new gt}function mo(c){return this.__data__.delete(c)}function go(c){return this.__data__.get(c)}function po(c){return this.__data__.has(c)}function vo(c,m){var _=this.__data__;if(_ instanceof gt){var E=_.__data__;if(!ie||E.length<n-1)return E.push([c,m]),this;_=this.__data__=new pt(E)}return _.set(c,m),this}vt.prototype.clear=ho,vt.prototype.delete=mo,vt.prototype.get=go,vt.prototype.has=po,vt.prototype.set=vo;function yo(c,m){var _=Nt(c)||lr(c)?Pa(c.length,String):[],E=_.length,K=!!E;for(var H in c)mt.call(c,H)&&!(K&&(H=="length"||ir(H,E)))&&_.push(H);return _}function Ae(c,m){for(var _=c.length;_--;)if(sr(c[_][0],m))return _;return-1}function er(c,m){m=Me(m,c)?[m]:nr(m);for(var _=0,E=m.length;c!=null&&_<E;)c=c[Ce(m[_++])];return _&&_==E?c:void 0}function xo(c){return Ht.call(c)}function _o(c,m){return c!=null&&m in Object(c)}function cn(c,m,_,E,K){return c===m?!0:c==null||m==null||!Te(c)&&!$e(m)?c!==c&&m!==m:bo(c,m,cn,_,E,K)}function bo(c,m,_,E,K,H){var W=Nt(c),Z=Nt(m),Y=f,et=f;W||(Y=bt(c),Y=Y==u?w:Y),Z||(et=bt(m),et=et==u?w:et);var Q=Y==w&&!nn(c),tt=et==w&&!nn(m),nt=Y==et;if(nt&&!Q)return H||(H=new vt),W||Go(c)?rr(c,m,_,E,K,H):Io(c,m,Y,_,E,K,H);if(!(K&s)){var st=Q&&mt.call(c,"__wrapped__"),lt=tt&&mt.call(m,"__wrapped__");if(st||lt){var wt=st?c.value():c,yt=lt?m.value():m;return H||(H=new vt),_(wt,yt,E,K,H)}}return nt?(H||(H=new vt),Lo(c,m,_,E,K,H)):!1}function wo(c,m,_,E){var K=_.length,H=K;if(c==null)return!H;for(c=Object(c);K--;){var W=_[K];if(W[2]?W[1]!==c[W[0]]:!(W[0]in c))return!1}for(;++K<H;){W=_[K];var Z=W[0],Y=c[Z],et=W[1];if(W[2]){if(Y===void 0&&!(Z in c))return!1}else{var Q=new vt,tt;if(!(tt===void 0?cn(et,Y,E,a|s,Q):tt))return!1}}return!0}function Ao(c){if(!Te(c)||Do(c))return!1;var m=cr(c)||nn(c)?Ha:X;return m.test($t(c))}function So(c){return $e(c)&&dn(c.length)&&!!J[Ht.call(c)]}function Mo(c){return typeof c=="function"?c:c==null?Ko:typeof c=="object"?Nt(c)?$o(c[0],c[1]):To(c):Jo(c)}function Co(c){if(!Ro(c))return Ga(c);var m=[];for(var _ in Object(c))mt.call(c,_)&&_!="constructor"&&m.push(_);return m}function To(c){var m=Oo(c);return m.length==1&&m[0][2]?or(m[0][0],m[0][1]):function(_){return _===c||wo(_,c,m)}}function $o(c,m){return Me(c)&&ar(m)?or(Ce(c),m):function(_){var E=qo(_,c);return E===void 0&&E===m?jo(_,c):cn(m,E,void 0,a|s)}}function No(c){return function(m){return er(m,c)}}function ko(c){if(typeof c=="string")return c;if(hn(c))return tr?tr.call(c):"";var m=c+"";return m=="0"&&1/c==-l?"-0":m}function Eo(c,m,_){var E=-1,K=Ca,H=c.length,W=!0,Z=[],Y=Z;if(H>=n){var et=m?null:Po(c);if(et)return rn(et);W=!1,K=La,Y=new oe}else Y=m?[]:Z;t:for(;++E<H;){var Q=c[E],tt=m?m(Q):Q;if(Q=Q!==0?Q:0,W&&tt===tt){for(var nt=Y.length;nt--;)if(Y[nt]===tt)continue t;m&&Y.push(tt),Z.push(Q)}else K(Y,tt,_)||(Y!==Z&&Y.push(tt),Z.push(Q))}return Z}function nr(c){return Nt(c)?c:Ho(c)}var Po=zt&&1/rn(new zt([,-0]))[1]==l?function(c){return new zt(c)}:Wo;function rr(c,m,_,E,K,H){var W=K&s,Z=c.length,Y=m.length;if(Z!=Y&&!(W&&Y>Z))return!1;var et=H.get(c);if(et&&H.get(m))return et==m;var Q=-1,tt=!0,nt=K&a?new oe:void 0;for(H.set(c,m),H.set(m,c);++Q<Z;){var st=c[Q],lt=m[Q];if(E)var wt=W?E(lt,st,Q,m,c,H):E(st,lt,Q,c,m,H);if(wt!==void 0){if(wt)continue;tt=!1;break}if(nt){if(!Ta(m,function(yt,kt){if(!nt.has(kt)&&(st===yt||_(st,yt,E,K,H)))return nt.add(kt)})){tt=!1;break}}else if(!(st===lt||_(st,lt,E,K,H))){tt=!1;break}}return H.delete(c),H.delete(m),tt}function Io(c,m,_,E,K,H,W){switch(_){case A:if(c.byteLength!=m.byteLength||c.byteOffset!=m.byteOffset)return!1;c=c.buffer,m=m.buffer;case R:return!(c.byteLength!=m.byteLength||!E(new Qn(c),new Qn(m)));case d:case h:case x:return sr(+c,+m);case g:return c.name==m.name&&c.message==m.message;case P:case I:return c==m+"";case p:var Z=Fa;case k:var Y=H&s;if(Z||(Z=rn),c.size!=m.size&&!Y)return!1;var et=W.get(c);if(et)return et==m;H|=a,W.set(c,m);var Q=rr(Z(c),Z(m),E,K,H,W);return W.delete(c),Q;case M:if(un)return un.call(c)==un.call(m)}return!1}function Lo(c,m,_,E,K,H){var W=K&s,Z=mn(c),Y=Z.length,et=mn(m),Q=et.length;if(Y!=Q&&!W)return!1;for(var tt=Y;tt--;){var nt=Z[tt];if(!(W?nt in m:mt.call(m,nt)))return!1}var st=H.get(c);if(st&&H.get(m))return st==m;var lt=!0;H.set(c,m),H.set(m,c);for(var wt=W;++tt<Y;){nt=Z[tt];var yt=c[nt],kt=m[nt];if(E)var fr=W?E(kt,yt,nt,m,c,H):E(yt,kt,nt,c,m,H);if(!(fr===void 0?yt===kt||_(yt,kt,E,K,H):fr)){lt=!1;break}wt||(wt=nt=="constructor")}if(lt&&!wt){var Ne=c.constructor,ke=m.constructor;Ne!=ke&&"constructor"in c&&"constructor"in m&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof ke=="function"&&ke instanceof ke)&&(lt=!1)}return H.delete(c),H.delete(m),lt}function Se(c,m){var _=c.__data__;return Bo(m)?_[typeof m=="string"?"string":"hash"]:_.map}function Oo(c){for(var m=mn(c),_=m.length;_--;){var E=m[_],K=c[E];m[_]=[E,K,ar(K)]}return m}function Vt(c,m){var _=Oa(c,m);return Ao(_)?_:void 0}var bt=xo;(on&&bt(new on(new ArrayBuffer(1)))!=A||ie&&bt(new ie)!=p||sn&&bt(sn.resolve())!=S||zt&&bt(new zt)!=k||ln&&bt(new ln)!=B)&&(bt=function(c){var m=Ht.call(c),_=m==w?c.constructor:void 0,E=_?$t(_):void 0;if(E)switch(E){case Ua:return A;case qa:return p;case ja:return S;case Ka:return k;case Wa:return B}return m});function Fo(c,m,_){m=Me(m,c)?[m]:nr(m);for(var E,K=-1,W=m.length;++K<W;){var H=Ce(m[K]);if(!(E=c!=null&&_(c,H)))break;c=c[H]}if(E)return E;var W=c?c.length:0;return!!W&&dn(W)&&ir(H,W)&&(Nt(c)||lr(c))}function ir(c,m){return m=m??o,!!m&&(typeof c=="number"||xe.test(c))&&c>-1&&c%1==0&&c<m}function Me(c,m){if(Nt(c))return!1;var _=typeof c;return _=="number"||_=="symbol"||_=="boolean"||c==null||hn(c)?!0:U.test(c)||!F.test(c)||m!=null&&c in Object(m)}function Bo(c){var m=typeof c;return m=="string"||m=="number"||m=="symbol"||m=="boolean"?c!=="__proto__":c===null}function Do(c){return!!Yn&&Yn in c}function Ro(c){var m=c&&c.constructor,_=typeof m=="function"&&m.prototype||be;return c===_}function ar(c){return c===c&&!Te(c)}function or(c,m){return function(_){return _==null?!1:_[c]===m&&(m!==void 0||c in Object(_))}}var Ho=fn(function(c){c=Uo(c);var m=[];return j.test(c)&&m.push(""),c.replace(L,function(_,E,K,H){m.push(K?H.replace(G,"$1"):E||_)}),m});function Ce(c){if(typeof c=="string"||hn(c))return c;var m=c+"";return m=="0"&&1/c==-l?"-0":m}function $t(c){if(c!=null){try{return Zn.call(c)}catch{}try{return c+""}catch{}}return""}function zo(c,m){return c&&c.length?Eo(c,Mo(m)):[]}function fn(c,m){if(typeof c!="function"||m&&typeof m!="function")throw new TypeError(r);var _=function(){var E=arguments,K=m?m.apply(this,E):E[0],H=_.cache;if(H.has(K))return H.get(K);var W=c.apply(this,E);return _.cache=H.set(K,W),W};return _.cache=new(fn.Cache||pt),_}fn.Cache=pt;function sr(c,m){return c===m||c!==c&&m!==m}function lr(c){return Vo(c)&&mt.call(c,"callee")&&(!za.call(c,"callee")||Ht.call(c)==u)}var Nt=Array.isArray;function ur(c){return c!=null&&dn(c.length)&&!cr(c)}function Vo(c){return $e(c)&&ur(c)}function cr(c){var m=Te(c)?Ht.call(c):"";return m==y||m==v}function dn(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=o}function Te(c){var m=typeof c;return!!c&&(m=="object"||m=="function")}function $e(c){return!!c&&typeof c=="object"}function hn(c){return typeof c=="symbol"||$e(c)&&Ht.call(c)==M}var Go=Jn?Ia(Jn):So;function Uo(c){return c==null?"":ko(c)}function qo(c,m,_){var E=c==null?void 0:er(c,m);return E===void 0?_:E}function jo(c,m){return c!=null&&Fo(c,m,_o)}function mn(c){return ur(c)?yo(c):Co(c)}function Ko(c){return c}function Wo(){}function Jo(c){return Me(c)?Ea(Ce(c)):No(c)}t.exports=zo})(Ye,Ye.exports);var Fd=Ye.exports;const Bd=Ze(Fd),Dd={r:245,g:177,b:164},Rd={r:245,g:152,b:183},Hd={r:227,g:90,b:122},zd={r:144,g:107,b:167},Vd={r:144,g:160,b:214},Gd={r:96,g:99,b:161},Ud={r:127,g:214,b:248},qd={r:85,g:205,b:230},jd={r:36,g:173,b:189},Kd={r:47,g:145,b:112},Wd={r:96,g:180,b:90},Jd={r:138,g:197,b:57},Yd={r:200,g:200,b:25},Zd={r:240,g:236,b:29},Xd={r:252,g:213,b:18},Qd={r:255,g:190,b:10},th={r:249,g:145,b:50},eh={r:255,g:109,b:86},nh={r:158,g:97,b:57},rh={r:189,g:163,b:91},ih={r:158,g:142,b:117},ah={r:120,g:144,b:156},oh=t=>{let{r:e,g:n,b:r}=t;return`#${((1<<24)+(e<<16)+(n<<8)+r).toString(16).slice(1)}`},{PI:Ut,sqrt:h0,pow:m0}=Math,jn=(t,e)=>{const n=typeof t=="number"?t:Dt(t),r=typeof e=="number"?e:Dt(e);return Math.abs(n-r)},te=Ot().domain([0,Ut*.4,Ut*.6,Ut,Ut*1.4,Ut*1.6,Ut*2]).range(["orange","grey","grey","darkturquoise","grey","grey","orange"]),sh=t=>{const e=zl(t.map(i=>i.magnitude)),n=Ot().domain([0,e]).range([0,1]).clamp(!0),r=Ot().domain([0,e]).range([.8,.43]).clamp(!0);return(i,a)=>{const s=a.magnitude,l=te.copy();return l.range(l.range().map(o=>(o=$i(o),o.s=n(s),o.l=r(s),o.toString()))),l(jn(i,a))}},lh=({innerCoords:t,outerCoords:e})=>sh(t),uh=({innerCoords:t,outerCoords:e})=>(n,r)=>te(jn(n,r)),ch=(t,e)=>te(jn(t,e)),fh=[qd,Qd,Hd,zd,Jd,th,ah,jd,Rd,Vd,Yd,Zd,nh,Xd,eh,Dd,Gd,Ud,Kd,Wd,rh,ih],dh=t=>{const e=Mi(fh.map(oh)).domain(t.map(n=>n.id));return n=>e(n.id)},hh=({container:t,width:e,height:n,innerText:r,innerPoints:i,innerColor:a,innerTextResetColor:s,innerTextBackColor:l,innerPointResetColor:o,innerPointBackColor:u,outerText:f,outerPoints:d,outerColor:h,outerTextResetColor:g,outerTextBackColor:y,outerPointResetColor:v,selectedColor:p,diameterLine:x,radialLine:w})=>{const S=new ve;let P=[];const k=L=>{P=Bd(P.concat(L),"id")},I=L=>P=[],M=L=>{L&&L.event&&L.event.stopPropagation()},B=L=>{f.removeAllConnectors(),r.hideBBox(),f.hideBBox(),w.reset(),i.color(o),r.color(s),f.color(g),d.color(v),x&&x.reset()},R=L=>{w.update(L),x&&x.update(L)},A=L=>{r.color(z=>a(L,z)),i.color(z=>a(L,z)),f.color(z=>h(L,z)),d.color(v)},C=L=>{f.color(z=>h(L,z)),d.color(v),r.color(l),r.color(L,p),i.color(u),i.color(L,p)},V=L=>{r.color(z=>a(L,z)),i.color(z=>a(L,z)),f.color(y),f.color(L,p),d.color(v),d.color(L,p),f.addConnector(L)},D=L=>{M(L),I(),B(),L&&(R(L.datum),A(L.datum)),N()},q=L=>{M(L),I(),B(),R(L.datum),C(L.datum),k(L.datum),N()},$=L=>{M(L),I(),B(),R(L.datum),V(L.datum),k(L.datum),N()},O=(L,z)=>({id:L.id,name:L.name,type:L.type}),T=(L,z,G)=>({...O(z),associationValue:z.associationValue,associationColor:ch(L,z)}),N=()=>{P.length>0&&t.node().getBoundingClientRect(),S.emit("selected",{selections:P.map(L=>({...O(L),associations:L.associations.map(z=>T(L,z))}))})},j={on:(L,z)=>S.on(L,z)&&j,resetSelections:D,selectInner:q,selectOuter:$,isSelected:L=>P.find(z=>L.id==z.id),isReset:()=>P.length==0,dispose:()=>{S.removeAllListeners("selected")}};return j},mh=({container:t,labels:e,fontFamily:n,onAssociationSelected:r,onCloseMenu:i})=>{const a={menu:"moonplot-associations-menu",header:"moonplot-associations-menu-header",close:"moonplot-associations-menu-close",title:"moonplot-associations-menu-title",list:"moonplot-associations-menu-list",item:"moonplot-associations-menu-item",itName:"moonplot-associations-menu-item-name",itArrow:"moonplot-associations-menu-item-arrow"},s=({selection:M,labels:B})=>`
    <div class="${a.header}" style="${dt[a.header]}">
      <div class="${a.title}" style="${dt[a.title]}">
        ${l({selection:M,labels:B})}
      </div>
      <div class="${a.close}" style="${dt[a.close]}">
        ${I(k,16,"black")}
      </div>
    </div>
    <div class="${a.list}" style="${dt[a.list]}">
      ${d(M).map(f).join("")}
    </div>
  `,l=({selection:M,labels:B})=>`Relative ${B.aggregate} for ${M.name}:`,o=M=>`
    <div class="${a.itArrow}"
      style="color: ${M.associationColor}; ${dt[a.itArrow]}">
      ${I(M.associationValue>0?P:S,16,M.associationColor)}
    </div>
  `,u=({name:M})=>M,f=M=>`
    <div class="${a.item}" data-id="${M.id}" style="${dt[a.item]}">
      ${o(M)}
      <div class="${a.itName}" style="${dt[a.itName]}">
        ${u(M)}
      </div>
    </div>
  `,d=({associations:M})=>{const A=M.filter(C=>Math.abs(C.associationValue)>.5);return A.length<2?M.filter((C,V)=>V<2):A.filter((C,V)=>V<20)},h=(M,B,R,A)=>{B.querySelectorAll(R).forEach(C=>{C.addEventListener(M,A)})},g=(M,B,R,A)=>{B.querySelectorAll(R).forEach(C=>{C.removeEventListener(M,A)})},y=(M,B,R)=>h("click",M,B,R),v=(M,B,R)=>g("click",M,B,R),p=(M,B,R,A)=>{h("mouseenter",M,B,R),h("mouseleave",M,B,A)},x=(M,B,R,A)=>{g("mouseenter",M,B,R),g("mouseleave",M,B,A)},w=()=>{const M=document.createElement("div");M.classList.add(a.menu),M.style.cssText=dt[a.menu],M.style.fontFamily=n,t.appendChild(M);let B=null;const R=F=>{if(!B)return;const U=F.target.getAttribute("data-id"),j=B.associations.find(L=>String(L.id)==String(U));r({[B.type]:{name:B.name},[j.type]:{name:j.name}})},A=()=>{V(),i()},C=F=>(B=F,M.style.visibility="visible",M.innerHTML=s({selection:F,labels:e}),y(M,`.${a.item}`,R),y(M,`.${a.close}`,A),p(M,`.${a.item}`,$,O),p(M,`.${a.close}`,T,N),b),V=()=>(B=null,M.style.visibility="hidden",v(M,`.${a.item}`,R),v(M,`.${a.close}`,A),x(M,`.${a.item}`,$,O),x(M,`.${a.close}`,T,N),b),D=()=>(v(M,`.${a.item}`,R),v(M,`.${a.close}`,A),x(M,`.${a.item}`,$,O),x(M,`.${a.close}`,T,N),M.remove(),b),q=F=>({in:U=>{U.target.style.cssText+=dt[`${F}:hover`]},out:U=>{U.target.style.cssText=dt[F]}}),{in:$,out:O}=q(a.item),{in:T,out:N}=q(a.close),b={show:C,hide:V,dispose:D};return b},S='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"/>',P='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z"/>',k='<path d="M0 0h24v24H0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>',I=(M,B,R)=>`<svg xmlns="http://www.w3.org/2000/svg" width="${B}" height="${B}" viewBox="0 0 24 24" style="fill:${R}">${M}</svg>`;return w().hide()},dt={"moonplot-associations-menu":`
    font-size: 13px;
    color: #4b4949;
    position: absolute;
    width: 220px;
    right: 4px;
    top: 100px;
    background-color: rgba(255, 255, 255, 0.9);
    box-shadow: rgba(63, 63, 63, 0.14) 0 1.25px 3.75px 0, rgba(63, 63, 63, 0.15) 0 1.25px 2.5px 0.625px;
    border-radius: 0.1875rem;
  `,"moonplot-associations-menu-header":`
    display: flex;
    align-items: center;
    justify-content: space-around;
  `,"moonplot-associations-menu-close":`
    margin: 6px;
    padding: 3px;
    border-radius: 50%;
  `,"moonplot-associations-menu-close:hover":`
    cursor: pointer;
    background-color: rgba(0, 0, 0, 0.1);
  `,"moonplot-associations-menu-title":`
    margin: 10px;
    font-weight: bold;
  `,"moonplot-associations-menu-list":`
    padding: 10px 0;
    border-top: #ccc 1px dotted;
    max-height: 45vmin;
    overflow-y: scroll;
  `,"moonplot-associations-menu-item":`
    padding: 8px 10px;
    display: flex;
    justify-content: flex-start;
    align-items: center;
  `,"moonplot-associations-menu-item:hover":`
    cursor: pointer;
    background-color: rgba(0, 0, 0, 0.03);
  `,"moonplot-associations-menu-item-name":`
    pointer-events: none;
  `,"moonplot-associations-menu-item-arrow":`
    margin-right: 6px;
    pointer-events: none;
  `},gh=({x:t,y:e,width:n})=>({fontColor:"#999",ytext:e+10,xleft:t,xcenter:t+n/2,xright:t+n}),_n=({container:t,fontSize:e,fontColor:n,text:r,x:i,y:a,xalign:s})=>t.append("text").attr("font-size",e).attr("fill",n).attr("x",i).attr("y",a).attr("text-anchor",s).attr("dominant-baseline","hanging").text(r),ph=({container:t,color:e,thickness:n,y:r,xleft:i,xright:a})=>t.append("path").attr("class","legend-line").attr("stroke",e).attr("stroke-width",n).attr("d",`
      M ${i} ${r} 
      L ${a} ${r}
    `),vh=({container:t,x:e,y:n,width:r,thickness:i,fontSize:a,nBins:s})=>{const{fontColor:l,ytext:o,xleft:u,xcenter:f,xright:d}=gh({x:e,y:n,width:r}),h=Math.PI/(s-1),g=r/s,y=2,v=t.append("g").attr("class","angle-legend-container");return[...Array(s).keys()].forEach(S=>{ph({container:v,color:te(h*(s-1-S)),thickness:i,y:n,xleft:u+g*S,xright:u+g*S+(g-y)})}),_n({container:v,fontSize:a,fontColor:l,text:"Low",x:u,y:o,xalign:"start"}),_n({container:v,fontSize:a,fontColor:l,text:"",x:f,y:o,xalign:"middle"}),_n({container:v,fontSize:a,fontColor:l,text:"High",x:d,y:o,xalign:"end"}),{show:()=>v.attr("opacity",1),hide:()=>v.attr("opacity",0),resize:({thickness:S,fontSize:P})=>{v.selectAll("path").attr("stroke-width",S),v.selectAll("text").attr("font-size",P)}}},yh="Roboto, Helvetica, Arial, sans-serif",Et=1e3,qt=1e3,Be=160,xh=5,_h="url(#diverging-angular-gradient)",bh=1.2,wh="#222",Ah="rgba(0, 0, 0, 0.16)",Sh="rgba(0, 0, 0, 0.01)",ni=100,ri={x:6,y:6},Mh="#555",Ch="#999",ii="rgba(0, 0, 0, .026)",Th=1,$h=1.1,Nh="rgba(0, 0, 0, .14)",kh=1.6,Eh="rgba(0, 0, 0, .5)",Ph="rgba(0, 0, 0, .1)",De="transparent",Ih="rgba(0, 0, 0, .6)",Lh="rgba(0, 0, 0, .1)",Oh="#ccc",Fh=2,Bh="rgba(0, 0, 0, .14)",Dh=1,ai=6,oi=12,si=4,Rh=({container:t,events:e,labels:n,innerCoords:r,outerCoords:i,explainedVariance:a,styles:s={}})=>{const l=s.fontFamily||yh,o={top:Be,right:Be,bottom:Be,left:Be},u=G=>G.forEach(X=>{X.screenCoord={x:f(X.x),y:d(X.y)}}),f=Ot().domain([-1,1]).range([o.left,Et-o.right]),d=Ot().domain([-1,1]).range([qt-o.bottom,o.top]);u(r),u(i);const h={x:f(0),y:d(0)},g=(Et-o.right-o.left)/2,y=()=>Et/p.node().getBoundingClientRect().width,v=()=>p.append("defs").append("linearGradient").attr("id","diverging-angular-gradient").selectAll("stop").data(te.domain().filter(G=>G<=Math.PI)).join("stop").attr("offset",G=>`${G/Math.PI*100}%`).attr("stop-color",G=>te(G,0)),p=xt(t).append("svg").attr("viewBox",[0,0,Et,qt]).attr("font-family",l),x=y(),w=12*x,S=(()=>{const G=Ot().domain(Ol(i.map(X=>X.magnitude))).range([11,27]);return X=>G(X.magnitude)})();Yr({container:p,x:h.x,y:h.y,stroke:Ah,color:Sh,radius:g,className:"moon"});const P=fd({container:p,center:h,radius:g,color:_h,thickness:1.6});dd({container:p,moonCenter:h,moonRadius:g,nBins:xh}),v();const k=vh({container:p,x:h.x-g,y:qt-30,width:g*2,nBins:7,thickness:si*x,fontSize:oi*x});k.hide(),Yr({container:p,x:h.x,y:h.y,color:wh,radius:bh,className:"center"});const I=lh({innerCoords:r,outerCoords:i}),M=uh({innerCoords:r,outerCoords:i}),B=dh(r),R=G=>{b.isSelected(G.datum)||(b.selectInner(G),k.show())},A=G=>{b.isSelected(G.datum)||(G.selection.style("cursor","pointer"),$.showBBox(G.datum))},C=G=>{b.isSelected(G.datum)||(G.selection.style("cursor","default"),$.hideBBox(G.datum))},V=G=>{b.isSelected(G.datum)||(b.selectOuter(G),N.color(De),k.show())},D=G=>{b.isSelected(G.datum)||(G.selection.style("cursor","pointer"),N.color(G.datum,Ch),O.addConnector(G.datum),O.showBBox(G.datum))},q=G=>{b.isSelected(G.datum)||(G.selection.style("cursor","default"),N.color(De),O.removeConnector(G.datum),O.hideBBox(G.datum))},$=Ld({container:p,width:Et,height:qt,moonCenter:h,moonRadius:g,xscale:f,yscale:d,innerCoords:r,pointRadius:ai,pointMargin:Fh,textSize:w,textOpacity:Dh,textMargin:ri,textMaxWidth:ni,connectorColor:Bh,bboxColor:ii,enableDebug:Zr,runtimeLayout:Xr}),O=pd({container:p,width:Et,height:qt,moonCenter:h,moonRadius:g,xscale:f,yscale:d,outerCoords:i,outerTextRadiusOffset:$h,textSize:S,textOpacity:Th,connectorColor:Nh,bboxColor:ii,textMargin:ri,textMaxWidth:ni,enableDebug:Zr,runtimeLayout:Xr}),T=ei({container:p,xscale:f,yscale:d,coords:r,color:B,radius:ai,className:"inner-points"}),N=ei({container:p,xscale:f,yscale:d,coords:i,color:De,radius:kh,className:"outer-points"});$.on("selected",R).on("hover:in",A).on("hover:out",C),T.on("selected",R).on("hover:in",A).on("hover:out",C),O.on("selected",V).on("hover:in",D).on("hover:out",q);const b=hh({container:p,width:Et,height:qt,innerText:$,innerPoints:T,innerColor:I,innerTextResetColor:Ih,innerTextBackColor:Lh,innerPointResetColor:B,innerPointBackColor:Oh,outerText:O,outerPoints:N,outerColor:M,outerTextResetColor:Eh,outerTextBackColor:Ph,outerPointResetColor:De,selectedColor:Mh,radialLine:P}),F=mh({container:t,labels:n,fontFamily:l,onAssociationSelected:G=>{e.emit("selected:association",G)},onCloseMenu:()=>{U()}});b.on("selected",({selections:G})=>{if(G.length==0){F.hide();return}F.show(G[0])});const U=()=>{b.resetSelections(null),k.hide()};p.on("pointerup",()=>{U()}),U();const j=()=>{z.disconnect(),e.removeAllListeners("selected:association"),$.dispose(),O.dispose(),T.dispose(),N.dispose(),b.dispose(),F.dispose(),p.on("pointerup",null),p.remove()},L=G=>{const X=y();k.resize({thickness:si*X,fontSize:oi*X})},z=new ResizeObserver(G=>{for(let X of G){if(!X.contentBoxSize)return;Array.isArray(X.contentBoxSize)?X.contentBoxSize[0]:X.contentBoxSize,L()}});return z.observe(p.node()),{dispose:j}},Hh=({container:t,data:e,metadata:n,styles:r})=>{const i=Of({metadata:n}),a=If({data:e,metadata:n,labels:i});if(a.error){const u={error:a.error,on:()=>u,dispose:()=>{}};return u}const s=new ve,l=Rh({container:t,events:s,labels:i,styles:r,...a}),o={on:(u,f)=>s.on(u,f)&&o,...l};return o},zh="queries",Vh="interest",Gh="volume",Uh=[{id:2000004065,name:"Massachusetts Institute of Technology",data:{},values:[{id:"Food & Drinks",name:"Food & Drinks",data:{},value:427},{id:"TV",name:"TV",data:{},value:159},{id:"Fashion",name:"Fashion",data:{},value:57},{id:"Photo & Video",name:"Photo & Video",data:{},value:228},{id:"Science",name:"Science",data:{},value:1432},{id:"Family & Parenting",name:"Family & Parenting",data:{},value:978},{id:"Animals & Pets",name:"Animals & Pets",data:{},value:396},{id:"Automotive",name:"Automotive",data:{},value:142},{id:"Beauty/Health & Fitness",name:"Beauty/Health & Fitness",data:{},value:568},{id:"Travel",name:"Travel",data:{},value:190},{id:"Technology",name:"Technology",data:{},value:2478},{id:"Music",name:"Music",data:{},value:599},{id:"Games",name:"Games",data:{},value:306},{id:"Environment",name:"Environment",data:{},value:387},{id:"Politics",name:"Politics",data:{},value:1067},{id:"Shopping",name:"Shopping",data:{},value:87},{id:"Movies",name:"Movies",data:{},value:199},{id:"Books",name:"Books",data:{},value:1335},{id:"Fine arts",name:"Fine arts",data:{},value:677},{id:"Business",name:"Business",data:{},value:1623},{id:"Sports",name:"Sports",data:{},value:833}]},{id:2000004179,name:"Berkeley",data:{},values:[{id:"Food & Drinks",name:"Food & Drinks",data:{},value:239},{id:"TV",name:"TV",data:{},value:87},{id:"Fashion",name:"Fashion",data:{},value:32},{id:"Photo & Video",name:"Photo & Video",data:{},value:104},{id:"Science",name:"Science",data:{},value:567},{id:"Family & Parenting",name:"Family & Parenting",data:{},value:415},{id:"Animals & Pets",name:"Animals & Pets",data:{},value:190},{id:"Automotive",name:"Automotive",data:{},value:46},{id:"Beauty/Health & Fitness",name:"Beauty/Health & Fitness",data:{},value:307},{id:"Travel",name:"Travel",data:{},value:73},{id:"Technology",name:"Technology",data:{},value:358},{id:"Music",name:"Music",data:{},value:251},{id:"Games",name:"Games",data:{},value:97},{id:"Environment",name:"Environment",data:{},value:191},{id:"Politics",name:"Politics",data:{},value:486},{id:"Shopping",name:"Shopping",data:{},value:21},{id:"Movies",name:"Movies",data:{},value:90},{id:"Books",name:"Books",data:{},value:656},{id:"Fine arts",name:"Fine arts",data:{},value:261},{id:"Business",name:"Business",data:{},value:284},{id:"Sports",name:"Sports",data:{},value:351}]},{id:2000004076,name:"California Institute of Technology",data:{},values:[{id:"Food & Drinks",name:"Food & Drinks",data:{},value:65},{id:"TV",name:"TV",data:{},value:24},{id:"Fashion",name:"Fashion",data:{},value:10},{id:"Photo & Video",name:"Photo & Video",data:{},value:59},{id:"Science",name:"Science",data:{},value:397},{id:"Family & Parenting",name:"Family & Parenting",data:{},value:126},{id:"Animals & Pets",name:"Animals & Pets",data:{},value:111},{id:"Automotive",name:"Automotive",data:{},value:26},{id:"Beauty/Health & Fitness",name:"Beauty/Health & Fitness",data:{},value:84},{id:"Travel",name:"Travel",data:{},value:42},{id:"Technology",name:"Technology",data:{},value:255},{id:"Music",name:"Music",data:{},value:114},{id:"Games",name:"Games",data:{},value:60},{id:"Environment",name:"Environment",data:{},value:75},{id:"Politics",name:"Politics",data:{},value:107},{id:"Shopping",name:"Shopping",data:{},value:23},{id:"Movies",name:"Movies",data:{},value:45},{id:"Books",name:"Books",data:{},value:214},{id:"Fine arts",name:"Fine arts",data:{},value:108},{id:"Business",name:"Business",data:{},value:128},{id:"Sports",name:"Sports",data:{},value:121}]},{id:2000004063,name:"Harvard",data:{},values:[{id:"Food & Drinks",name:"Food & Drinks",data:{},value:2626},{id:"TV",name:"TV",data:{},value:1070},{id:"Fashion",name:"Fashion",data:{},value:531},{id:"Photo & Video",name:"Photo & Video",data:{},value:1227},{id:"Science",name:"Science",data:{},value:4728},{id:"Family & Parenting",name:"Family & Parenting",data:{},value:7789},{id:"Animals & Pets",name:"Animals & Pets",data:{},value:3319},{id:"Automotive",name:"Automotive",data:{},value:525},{id:"Beauty/Health & Fitness",name:"Beauty/Health & Fitness",data:{},value:4689},{id:"Travel",name:"Travel",data:{},value:1392},{id:"Technology",name:"Technology",data:{},value:4264},{id:"Music",name:"Music",data:{},value:3754},{id:"Games",name:"Games",data:{},value:957},{id:"Environment",name:"Environment",data:{},value:1875},{id:"Politics",name:"Politics",data:{},value:9388},{id:"Shopping",name:"Shopping",data:{},value:348},{id:"Movies",name:"Movies",data:{},value:1372},{id:"Books",name:"Books",data:{},value:6816},{id:"Fine arts",name:"Fine arts",data:{},value:2900},{id:"Business",name:"Business",data:{},value:6233},{id:"Sports",name:"Sports",data:{},value:5018}]},{id:2000004089,name:"Carnegie Mellon",data:{},values:[{id:"Food & Drinks",name:"Food & Drinks",data:{},value:32},{id:"TV",name:"TV",data:{},value:10},{id:"Fashion",name:"Fashion",data:{},value:4},{id:"Photo & Video",name:"Photo & Video",data:{},value:11},{id:"Science",name:"Science",data:{},value:225},{id:"Family & Parenting",name:"Family & Parenting",data:{},value:79},{id:"Animals & Pets",name:"Animals & Pets",data:{},value:19},{id:"Automotive",name:"Automotive",data:{},value:9},{id:"Beauty/Health & Fitness",name:"Beauty/Health & Fitness",data:{},value:44},{id:"Travel",name:"Travel",data:{},value:15},{id:"Technology",name:"Technology",data:{},value:262},{id:"Music",name:"Music",data:{},value:39},{id:"Games",name:"Games",data:{},value:19},{id:"Environment",name:"Environment",data:{},value:26},{id:"Politics",name:"Politics",data:{},value:51},{id:"Shopping",name:"Shopping",data:{},value:10},{id:"Movies",name:"Movies",data:{},value:15},{id:"Books",name:"Books",data:{},value:113},{id:"Fine arts",name:"Fine arts",data:{},value:51},{id:"Business",name:"Business",data:{},value:113},{id:"Sports",name:"Sports",data:{},value:60}]},{id:2000004187,name:"Brown University",data:{},values:[{id:"Food & Drinks",name:"Food & Drinks",data:{},value:21},{id:"TV",name:"TV",data:{},value:8},{id:"Fashion",name:"Fashion",data:{},value:2},{id:"Photo & Video",name:"Photo & Video",data:{},value:7},{id:"Science",name:"Science",data:{},value:107},{id:"Family & Parenting",name:"Family & Parenting",data:{},value:89},{id:"Animals & Pets",name:"Animals & Pets",data:{},value:29},{id:"Automotive",name:"Automotive",data:{},value:11},{id:"Beauty/Health & Fitness",name:"Beauty/Health & Fitness",data:{},value:75},{id:"Travel",name:"Travel",data:{},value:10},{id:"Technology",name:"Technology",data:{},value:76},{id:"Music",name:"Music",data:{},value:35},{id:"Games",name:"Games",data:{},value:11},{id:"Environment",name:"Environment",data:{},value:20},{id:"Politics",name:"Politics",data:{},value:82},{id:"Shopping",name:"Shopping",data:{},value:5},{id:"Movies",name:"Movies",data:{},value:12},{id:"Books",name:"Books",data:{},value:110},{id:"Fine arts",name:"Fine arts",data:{},value:24},{id:"Business",name:"Business",data:{},value:75},{id:"Sports",name:"Sports",data:{},value:137}]}],qh={dimension1:zh,dimension2:Vh,aggregate:Gh,results:Uh},jh="queries",Kh="sentiment",Wh="volume",Jh=[{id:2000004065,name:"Massachusetts Institute of Technology",data:{},values:[{id:"positive",name:"positive",data:{},value:2504},{id:"neutral",name:"neutral",data:{},value:19534},{id:"negative",name:"negative",data:{},value:2885}]},{id:2000004179,name:"Berkeley",data:{},values:[{id:"positive",name:"positive",data:{},value:1505},{id:"neutral",name:"neutral",data:{},value:11456},{id:"negative",name:"negative",data:{},value:2271}]},{id:2000004076,name:"California Institute of Technology",data:{},values:[{id:"positive",name:"positive",data:{},value:228},{id:"neutral",name:"neutral",data:{},value:2975},{id:"negative",name:"negative",data:{},value:193}]},{id:2000004063,name:"Harvard",data:{},values:[{id:"positive",name:"positive",data:{},value:15373},{id:"neutral",name:"neutral",data:{},value:109546},{id:"negative",name:"negative",data:{},value:26132}]},{id:2000004089,name:"Carnegie Mellon",data:{},values:[{id:"positive",name:"positive",data:{},value:324},{id:"neutral",name:"neutral",data:{},value:1474},{id:"negative",name:"negative",data:{},value:610}]},{id:2000004187,name:"Brown University",data:{},values:[{id:"positive",name:"positive",data:{},value:401},{id:"neutral",name:"neutral",data:{},value:1615},{id:"negative",name:"negative",data:{},value:252}]}],Yh={dimension1:jh,dimension2:Kh,aggregate:Wh,results:Jh},Zh="queries",Xh="emotions",Qh="volume",t0=[{id:2000004065,name:"Massachusetts Institute of Technology",data:{},values:[{id:"emotions:Anger",name:"Anger",data:{},value:835},{id:"emotions:Fear",name:"Fear",data:{},value:416},{id:"emotions:Disgust",name:"Disgust",data:{},value:327},{id:"emotions:Joy",name:"Joy",data:{},value:1939},{id:"emotions:Surprise",name:"Surprise",data:{},value:87},{id:"emotions:Sadness",name:"Sadness",data:{},value:778}]},{id:2000004179,name:"Berkeley",data:{},values:[{id:"emotions:Anger",name:"Anger",data:{},value:263},{id:"emotions:Fear",name:"Fear",data:{},value:247},{id:"emotions:Disgust",name:"Disgust",data:{},value:373},{id:"emotions:Joy",name:"Joy",data:{},value:1912},{id:"emotions:Surprise",name:"Surprise",data:{},value:15},{id:"emotions:Sadness",name:"Sadness",data:{},value:1958}]},{id:2000004076,name:"California Institute of Technology",data:{},values:[{id:"emotions:Anger",name:"Anger",data:{},value:73},{id:"emotions:Fear",name:"Fear",data:{},value:70},{id:"emotions:Disgust",name:"Disgust",data:{},value:23},{id:"emotions:Joy",name:"Joy",data:{},value:428},{id:"emotions:Surprise",name:"Surprise",data:{},value:5},{id:"emotions:Sadness",name:"Sadness",data:{},value:89}]},{id:2000004063,name:"Harvard",data:{},values:[{id:"emotions:Anger",name:"Anger",data:{},value:3758},{id:"emotions:Fear",name:"Fear",data:{},value:3706},{id:"emotions:Disgust",name:"Disgust",data:{},value:6039},{id:"emotions:Joy",name:"Joy",data:{},value:17549},{id:"emotions:Surprise",name:"Surprise",data:{},value:257},{id:"emotions:Sadness",name:"Sadness",data:{},value:51061}]},{id:2000004089,name:"Carnegie Mellon",data:{},values:[{id:"emotions:Anger",name:"Anger",data:{},value:75},{id:"emotions:Fear",name:"Fear",data:{},value:66},{id:"emotions:Disgust",name:"Disgust",data:{},value:20},{id:"emotions:Joy",name:"Joy",data:{},value:473},{id:"emotions:Surprise",name:"Surprise",data:{},value:2},{id:"emotions:Sadness",name:"Sadness",data:{},value:388}]},{id:2000004187,name:"Brown University",data:{},values:[{id:"emotions:Anger",name:"Anger",data:{},value:24},{id:"emotions:Fear",name:"Fear",data:{},value:193},{id:"emotions:Disgust",name:"Disgust",data:{},value:35},{id:"emotions:Joy",name:"Joy",data:{},value:480},{id:"emotions:Surprise",name:"Surprise",data:{},value:2},{id:"emotions:Sadness",name:"Sadness",data:{},value:191}]}],e0={dimension1:Zh,dimension2:Xh,aggregate:Qh,results:t0},n0="queries",r0="categories",i0="volume",a0=[{id:2000004065,name:"Massachusetts Institute of Technology",data:{},values:[{id:7596950,name:"Health Hazards",data:{},value:370},{id:7267078,name:"Bribery",data:{},value:2},{id:7267079,name:"Natural Disaster",data:{},value:185},{id:7267076,name:"Legal issues",data:{},value:67},{id:7267077,name:"Academic Misconduct",data:{},value:2},{id:7267074,name:"Death",data:{},value:2},{id:7267075,name:"Discrimination",data:{},value:1},{id:7267072,name:"Animal Testing",data:{},value:1},{id:7267073,name:"Protests/Boycott",data:{},value:125},{id:7267070,name:"Sexism",data:{},value:2},{id:7267071,name:"Crimes/Arrests",data:{},value:304},{id:7267068,name:"Guns / Shootings",data:{},value:1},{id:7267069,name:"Hazing",data:{},value:0},{id:7267066,name:"Sexual Misconduct",data:{},value:0},{id:7267067,name:"Workplace Violation",data:{},value:0},{id:7267064,name:"Racism",data:{},value:241},{id:7267065,name:"Athletic Misconduct",data:{},value:0}]},{id:2000004179,name:"Berkeley",data:{},values:[{id:7596950,name:"Health Hazards",data:{},value:868},{id:7267078,name:"Bribery",data:{},value:0},{id:7267079,name:"Natural Disaster",data:{},value:99},{id:7267076,name:"Legal issues",data:{},value:93},{id:7267077,name:"Academic Misconduct",data:{},value:1},{id:7267074,name:"Death",data:{},value:21},{id:7267075,name:"Discrimination",data:{},value:0},{id:7267072,name:"Animal Testing",data:{},value:1},{id:7267073,name:"Protests/Boycott",data:{},value:143},{id:7267070,name:"Sexism",data:{},value:0},{id:7267071,name:"Crimes/Arrests",data:{},value:123},{id:7267068,name:"Guns / Shootings",data:{},value:1},{id:7267069,name:"Hazing",data:{},value:0},{id:7267066,name:"Sexual Misconduct",data:{},value:13},{id:7267067,name:"Workplace Violation",data:{},value:0},{id:7267064,name:"Racism",data:{},value:180},{id:7267065,name:"Athletic Misconduct",data:{},value:0}]},{id:2000004076,name:"California Institute of Technology",data:{},values:[{id:7596950,name:"Health Hazards",data:{},value:55},{id:7267078,name:"Bribery",data:{},value:0},{id:7267079,name:"Natural Disaster",data:{},value:11},{id:7267076,name:"Legal issues",data:{},value:5},{id:7267077,name:"Academic Misconduct",data:{},value:0},{id:7267074,name:"Death",data:{},value:0},{id:7267075,name:"Discrimination",data:{},value:0},{id:7267072,name:"Animal Testing",data:{},value:1},{id:7267073,name:"Protests/Boycott",data:{},value:1},{id:7267070,name:"Sexism",data:{},value:0},{id:7267071,name:"Crimes/Arrests",data:{},value:3},{id:7267068,name:"Guns / Shootings",data:{},value:0},{id:7267069,name:"Hazing",data:{},value:0},{id:7267066,name:"Sexual Misconduct",data:{},value:0},{id:7267067,name:"Workplace Violation",data:{},value:0},{id:7267064,name:"Racism",data:{},value:10},{id:7267065,name:"Athletic Misconduct",data:{},value:0}]},{id:2000004063,name:"Harvard",data:{},values:[{id:7596950,name:"Health Hazards",data:{},value:2059},{id:7267078,name:"Bribery",data:{},value:64},{id:7267079,name:"Natural Disaster",data:{},value:25},{id:7267076,name:"Legal issues",data:{},value:738},{id:7267077,name:"Academic Misconduct",data:{},value:0},{id:7267074,name:"Death",data:{},value:125},{id:7267075,name:"Discrimination",data:{},value:51},{id:7267072,name:"Animal Testing",data:{},value:16},{id:7267073,name:"Protests/Boycott",data:{},value:58},{id:7267070,name:"Sexism",data:{},value:6},{id:7267071,name:"Crimes/Arrests",data:{},value:815},{id:7267068,name:"Guns / Shootings",data:{},value:58},{id:7267069,name:"Hazing",data:{},value:0},{id:7267066,name:"Sexual Misconduct",data:{},value:29},{id:7267067,name:"Workplace Violation",data:{},value:0},{id:7267064,name:"Racism",data:{},value:267},{id:7267065,name:"Athletic Misconduct",data:{},value:0}]},{id:2000004089,name:"Carnegie Mellon",data:{},values:[{id:7596950,name:"Health Hazards",data:{},value:36},{id:7267078,name:"Bribery",data:{},value:0},{id:7267079,name:"Natural Disaster",data:{},value:0},{id:7267076,name:"Legal issues",data:{},value:19},{id:7267077,name:"Academic Misconduct",data:{},value:0},{id:7267074,name:"Death",data:{},value:0},{id:7267075,name:"Discrimination",data:{},value:0},{id:7267072,name:"Animal Testing",data:{},value:0},{id:7267073,name:"Protests/Boycott",data:{},value:0},{id:7267070,name:"Sexism",data:{},value:0},{id:7267071,name:"Crimes/Arrests",data:{},value:2},{id:7267068,name:"Guns / Shootings",data:{},value:0},{id:7267069,name:"Hazing",data:{},value:0},{id:7267066,name:"Sexual Misconduct",data:{},value:0},{id:7267067,name:"Workplace Violation",data:{},value:0},{id:7267064,name:"Racism",data:{},value:1},{id:7267065,name:"Athletic Misconduct",data:{},value:0}]},{id:2000004187,name:"Brown University",data:{},values:[{id:7596950,name:"Health Hazards",data:{},value:212},{id:7267078,name:"Bribery",data:{},value:0},{id:7267079,name:"Natural Disaster",data:{},value:0},{id:7267076,name:"Legal issues",data:{},value:4},{id:7267077,name:"Academic Misconduct",data:{},value:0},{id:7267074,name:"Death",data:{},value:3},{id:7267075,name:"Discrimination",data:{},value:0},{id:7267072,name:"Animal Testing",data:{},value:0},{id:7267073,name:"Protests/Boycott",data:{},value:0},{id:7267070,name:"Sexism",data:{},value:0},{id:7267071,name:"Crimes/Arrests",data:{},value:2},{id:7267068,name:"Guns / Shootings",data:{},value:0},{id:7267069,name:"Hazing",data:{},value:0},{id:7267066,name:"Sexual Misconduct",data:{},value:0},{id:7267067,name:"Workplace Violation",data:{},value:0},{id:7267064,name:"Racism",data:{},value:3},{id:7267065,name:"Athletic Misconduct",data:{},value:0}]}],o0={dimension1:n0,dimension2:r0,aggregate:i0,results:a0},s0="queries",l0="dayOfWeek",u0="volume",c0=[{id:2000004065,name:"Massachusetts Institute of Technology",data:{},values:[{id:1,name:"1",data:{},value:3511},{id:2,name:"2",data:{},value:1989},{id:3,name:"3",data:{},value:4415},{id:4,name:"4",data:{},value:5206},{id:5,name:"5",data:{},value:3915},{id:6,name:"6",data:{},value:2590},{id:7,name:"7",data:{},value:3273}]},{id:2000004179,name:"Berkeley",data:{},values:[{id:1,name:"1",data:{},value:3068},{id:2,name:"2",data:{},value:819},{id:3,name:"3",data:{},value:2683},{id:4,name:"4",data:{},value:2926},{id:5,name:"5",data:{},value:2328},{id:6,name:"6",data:{},value:2094},{id:7,name:"7",data:{},value:1295}]},{id:2000004076,name:"California Institute of Technology",data:{},values:[{id:1,name:"1",data:{},value:313},{id:2,name:"2",data:{},value:145},{id:3,name:"3",data:{},value:636},{id:4,name:"4",data:{},value:724},{id:5,name:"5",data:{},value:485},{id:6,name:"6",data:{},value:548},{id:7,name:"7",data:{},value:544}]},{id:2000004063,name:"Harvard",data:{},values:[{id:1,name:"1",data:{},value:15989},{id:2,name:"2",data:{},value:6897},{id:3,name:"3",data:{},value:23666},{id:4,name:"4",data:{},value:20707},{id:5,name:"5",data:{},value:29251},{id:6,name:"6",data:{},value:36023},{id:7,name:"7",data:{},value:18442}]},{id:2000004089,name:"Carnegie Mellon",data:{},values:[{id:1,name:"1",data:{},value:276},{id:2,name:"2",data:{},value:144},{id:3,name:"3",data:{},value:306},{id:4,name:"4",data:{},value:601},{id:5,name:"5",data:{},value:606},{id:6,name:"6",data:{},value:211},{id:7,name:"7",data:{},value:262}]},{id:2000004187,name:"Brown University",data:{},values:[{id:1,name:"1",data:{},value:409},{id:2,name:"2",data:{},value:216},{id:3,name:"3",data:{},value:467},{id:4,name:"4",data:{},value:389},{id:5,name:"5",data:{},value:412},{id:6,name:"6",data:{},value:209},{id:7,name:"7",data:{},value:161}]}],f0={dimension1:s0,dimension2:l0,aggregate:u0,results:c0},d0=t=>{const e=t.map(n=>n.results).flat().reduce((n,r)=>(n[r.name]=[].concat(n[r.name]||[],r.values),n),{});return{results:t[0].results.map(n=>({...n,values:e[n.name]}))}},Re=d0([qh,Yh,e0,o0,f0]),Jt=Hh({container:document.getElementById("app"),metadata:{dimension1:Re.dimension1,dimension2:Re.dimension2,aggregate:Re.aggregate},data:Re.results.map(t=>t.values.map(e=>({dimension1:t.name,dimension2:e.name,aggregate:e.value}))).flat()});Jt.error&&(document.getElementById("app").innerHTML=typeof Jt.error=="string"?Jt.error:JSON.stringify(Jt.error));Jt.on("selected:association",t=>{console.log(t)});window.moonplot=Jt;
